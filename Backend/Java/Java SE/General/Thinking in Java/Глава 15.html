<!DOCTYPE html>
<html dir="ltr" class="client-nojs" lang="ru"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta charset="UTF-8"><title>Глава 15 Thinking in Java 4th edition — WikiJava: Wiki of Java: викифицированные книги и статьи по Java</title>
<meta name="generator" content="MediaWiki 1.22.2">
<link rel="shortcut icon" href="http://wikijava.it-cache.net/favicon.ico">
<link rel="search" type="application/opensearchdescription+xml" href="http://wikijava.it-cache.net/opensearch_desc.php" title="WikiJava: Wiki of Java: викифицированные книги и статьи по Java (ru)">
<link rel="EditURI" type="application/rsd+xml" href="http://wikijava.it-cache.net/api.php@action=rsd">
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html">
<link rel="alternate" type="application/atom+xml" title="WikiJava: Wiki of Java: викифицированные книги и статьи по Java&nbsp;— Atom-лента" href="http://wikijava.it-cache.net/index.php@title=%D0%A1%D0%BB%D1%83%D0%B6%D0%B5%D0%B1%D0%BD%D0%B0%D1%8F%253A%D0%A1%D0%B2%D0%B5%D0%B6%D0%B8%D0%B5_%D0%BF%D1%80%D0%B0%D0%B2%D0%BA%D0%B8&amp;feed=atom">
<link rel="stylesheet" href="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%2015_files/style3.css">
<meta name="ResourceLoaderDynamicStyles" content="">
<style>a:lang(ar),a:lang(ckb),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: wjava2-wj_:resourceloader:filter:minify-css:7:32e7e505403c81fe0a24e297ef166436 */</style>

<script src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%2015_files/style1.css"></script><script src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%2015_files/load.html"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Глава_15_Thinking_in_Java_4th_edition","wgTitle":"Глава 15 Thinking in Java 4th edition","wgCurRevisionId":39,"wgRevisionId":39,"wgArticleId":29,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Книги","Java"],"wgBreakFrames":false,"wgPageContentLanguage":"ru","wgPageContentModel":"wikitext","wgSeparatorTransformTable":[",\t."," \t,"],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"],"wgMonthNamesShort":["","янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"],"wgRelevantPageName":"Глава_15_Thinking_in_Java_4th_edition","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgVectorEnabledModules":{"collapsiblenav":true,"collapsibletabs":true,"editwarning":true,"expandablesearch":false,"footercleanup":false,"sectioneditlinks":false,"simplesearch":true,"experiments":true}});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function(){mw.user.options.set({"ccmeonemails":0,"cols":80,"date":"default","diffonly":0,"disablemail":0,"disablesuggest":0,"editfont":"default","editondblclick":0,"editsection":1,"editsectiononrightclick":0,"enotifminoredits":0,"enotifrevealaddr":0,"enotifusertalkpages":1,"enotifwatchlistpages":0,"extendwatchlist":0,"fancysig":0,"forceeditsummary":0,"gender":"unknown","hideminor":0,"hidepatrolled":0,"imagesize":2,"justify":0,"math":1,"minordefault":0,"newpageshidepatrolled":0,"nocache":0,"noconvertlink":0,"norollbackdiff":0,"numberheadings":0,"previewonfirst":0,"previewontop":1,"rcdays":7,"rclimit":50,"rememberpassword":0,"rows":25,"searchlimit":20,"showhiddencats":0,"shownumberswatching":1,"showtoc":1,"showtoolbar":1,"skin":"vector","stubthreshold":0,"thumbsize":2,"underline":2,"uselivepreview":0,"usenewrc":0,"vector-simplesearch":1,"watchcreations":0,"watchdefault":0,"watchdeletion":0,"watchlistdays":3,"watchlisthideanons":0,"watchlisthidebots":0,
"watchlisthideliu":0,"watchlisthideminor":0,"watchlisthideown":0,"watchlisthidepatrolled":0,"watchmoves":0,"wllimit":250,"useeditwarning":1,"prefershttps":1,"language":"ru","variant-gan":"gan","variant-iu":"iu","variant-kk":"kk","variant-ku":"ku","variant-shi":"shi","variant-sr":"sr","variant-tg":"tg","variant-uz":"uz","variant-zh":"zh","searchNs0":true,"searchNs1":false,"searchNs2":false,"searchNs3":false,"searchNs4":false,"searchNs5":false,"searchNs6":false,"searchNs7":false,"searchNs8":false,"searchNs9":false,"searchNs10":false,"searchNs11":false,"searchNs12":false,"searchNs13":false,"searchNs14":false,"searchNs15":false,"variant":"ru"});},{},{});mw.loader.implement("user.tokens",function(){mw.user.tokens.set({"editToken":"+\\","patrolToken":false,"watchToken":false});},{},{});
/* cache key: wjava2-wj_:resourceloader:filter:minify-js:7:07bb1f4d2452379e70abca47c4cde6d9 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","skins.vector.js"]);
}</script>
<style type="text/css">/*<![CDATA[*/
.source-java5 {line-height: normal;}
.source-java5 li, .source-java5 pre {
	line-height: normal; border: 0px none white;
}
/**
 * GeSHi Dynamically Generated Stylesheet
 * --------------------------------------
 * Dynamically generated stylesheet for java5
 * CSS class: source-java5, CSS id: 
 * GeSHi (C) 2004 - 2007 Nigel McNie, 2007 - 2008 Benny Baumann
 * (http://qbnz.com/highlighter/ and http://geshi.org/)
 * --------------------------------------
 */
.java5.source-java5 .de1, .java5.source-java5 .de2 {font: normal normal 1em/1.2em monospace; margin:0; padding:0; background:none; vertical-align:top;font-family: monospace, monospace;}
.java5.source-java5  {font-family:monospace;}
.java5.source-java5 .imp {font-weight: bold; color: red;}
.java5.source-java5 li, .java5.source-java5 .li1 {font-weight: normal; vertical-align:top;}
.java5.source-java5 .ln {width:1px;text-align:right;margin:0;padding:0 2px;vertical-align:top;}
.java5.source-java5 .li2 {font-weight: bold; vertical-align:top;}
.java5.source-java5 .kw1 {color: #000000;  font-weight: bold;}
.java5.source-java5 .kw2 {color: #000000; font-weight: bold;}
.java5.source-java5 .kw3 {color: #006600; font-weight: bold;}
.java5.source-java5 .kw4 {color: #006600; font-weight: bold;}
.java5.source-java5 .kw5 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw6 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw7 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw8 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw9 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw10 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw11 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw12 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw13 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw14 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw15 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw16 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw17 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw18 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw19 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw20 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw21 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw22 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw23 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw24 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw25 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw26 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw27 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw28 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw29 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw30 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw31 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw32 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw33 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw34 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw35 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw36 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw37 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw38 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw39 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw40 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw41 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw42 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw43 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw44 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw45 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw46 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw47 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw48 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw49 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw50 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw51 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw52 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw53 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw54 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw55 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw56 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw57 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw58 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw59 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw60 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw61 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw62 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw63 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw64 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw65 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw66 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw67 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw68 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw69 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw70 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw71 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw72 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw73 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw74 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw75 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw76 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw77 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw78 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw79 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw80 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw81 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw82 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw83 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw84 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw85 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw86 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw87 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw88 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw89 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw90 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw91 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw92 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw93 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw94 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw95 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw96 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw97 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw98 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw99 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw100 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw101 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw102 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw103 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw104 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw105 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw106 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw107 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw108 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw109 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw110 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw111 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw112 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw113 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw114 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw115 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw116 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw117 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw118 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw119 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw120 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw121 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw122 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw123 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw124 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw125 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw126 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw127 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw128 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw129 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw130 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw131 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw132 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw133 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw134 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw135 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw136 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw137 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw138 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw139 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw140 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw141 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw142 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw143 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw144 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw145 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw146 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw147 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw148 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw149 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw150 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw151 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw152 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw153 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw154 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw155 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw156 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw157 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw158 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw159 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw160 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw161 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw162 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw163 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw164 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw165 {color: #003399; font-weight: bold;}
.java5.source-java5 .kw166 {color: #003399; font-weight: bold;}
.java5.source-java5 .co1 {color: #666666; font-style: italic;}
.java5.source-java5 .co2 {color: #006699;}
.java5.source-java5 .co3 {color: #008000; font-style: italic; font-weight: bold;}
.java5.source-java5 .coMULTI {color: #666666; font-style: italic;}
.java5.source-java5 .es0 {color: #000099; font-weight: bold;}
.java5.source-java5 .br0 {color: #009900;}
.java5.source-java5 .sy0 {color: #339933;}
.java5.source-java5 .st0 {color: #0000ff;}
.java5.source-java5 .nu0 {color: #cc66cc;}
.java5.source-java5 .me1 {color: #006633;}
.java5.source-java5 .me2 {color: #006633;}
.java5.source-java5 .ln-xtra, .java5.source-java5 li.ln-xtra, .java5.source-java5 div.ln-xtra {background-color: #ffc;}
.java5.source-java5 span.xtra { display:block; }

/*]]>*/
</style><!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/vector/csshover.min.htc")}</style><![endif]--></head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Глава_15_Thinking_in_Java_4th_edition skin-vector action-view vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="mw-js-message" style="display:none;"></div>
						<h1 id="firstHeading" class="firstHeading" lang="ru"><span dir="auto">Глава 15 Thinking in Java 4th edition</span></h1>
			<div id="bodyContent">
								<div id="siteSub">Материал из WikiJava: Wiki of Java: викифицированные книги и статьи по Java</div>
								<div id="contentSub"></div>
												<div id="jump-to-nav" class="mw-jump">
					Перейти к:					<a href="http://wikijava.it-cache.net/index.php@title=Glava_15_Thinking_in_Java_4th_edition.html#mw-navigation">навигация</a>, 					<a href="http://wikijava.it-cache.net/index.php@title=Glava_15_Thinking_in_Java_4th_edition.html#p-search">поиск</a>
				</div>
				<div id="mw-content-text" dir="ltr" class="mw-content-ltr" lang="ru"><table style="clear: right; margin-bottom: .5em; float: right; padding: .5em 0 .8em 1.4em; background: none; width: auto;" cellpadding="0" cellspacing="0">
<tbody><tr>
<td> <div id="toc" class="toc"><div id="toctitle"><h2>Содержание</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="http://wikijava.it-cache.net/index.php@title=Glava_15_Thinking_in_Java_4th_edition.html#.D0.9C.D0.90.D0.A1.D0.A1.D0.98.D0.92.D0.AB"><span class="tocnumber">1</span> <span class="toctext"><b>МАССИВЫ</b></span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="http://wikijava.it-cache.net/index.php@title=Glava_15_Thinking_in_Java_4th_edition.html#.D0.9E.D1.81.D0.BE.D0.B1.D0.B5.D0.BD.D0.BD.D0.BE.D1.81.D1.82.D0.B8_.D0.BC.D0.B0.D1.81.D1.81.D0.B8.D0.B2.D0.BE.D0.B2"><span class="tocnumber">1.1</span> <span class="toctext">Особенности массивов</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="http://wikijava.it-cache.net/index.php@title=Glava_15_Thinking_in_Java_4th_edition.html#.D0.9C.D0.B0.D1.81.D1.81.D0.B8.D0.B2_.D0.BA.D0.B0.D0.BA_.D0.BE.D0.B1.D1.8A.D0.B5.D0.BA.D1.82"><span class="tocnumber">1.2</span> <span class="toctext">Массив как объект</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="http://wikijava.it-cache.net/index.php@title=Glava_15_Thinking_in_Java_4th_edition.html#.D0.92.D0.BE.D0.B7.D0.B2.D1.80.D0.B0.D1.82_.D0.BC.D0.B0.D1.81.D1.81.D0.B8.D0.B2.D0.B0"><span class="tocnumber">1.3</span> <span class="toctext">Возврат массива</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="http://wikijava.it-cache.net/index.php@title=Glava_15_Thinking_in_Java_4th_edition.html#.D0.9C.D0.BD.D0.BE.D0.B3.D0.BE.D0.BC.D0.B5.D1.80.D0.BD.D1.8B.D0.B5_.D0.BC.D0.B0.D1.81.D1.81.D0.B8.D0.B2.D1.8B"><span class="tocnumber">1.4</span> <span class="toctext">Многомерные массивы</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="http://wikijava.it-cache.net/index.php@title=Glava_15_Thinking_in_Java_4th_edition.html#.D0.9C.D0.B0.D1.81.D1.81.D0.B8.D0.B2.D1.8B_.D0.B8_.D0.BF.D0.B0.D1.80.D0.B0.D0.BC.D0.B5.D1.82.D1.80.D0.B8.D0.B7.D0.B0.D1.86.D0.B8.D1.8F"><span class="tocnumber">1.5</span> <span class="toctext">Массивы и параметризация</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="http://wikijava.it-cache.net/index.php@title=Glava_15_Thinking_in_Java_4th_edition.html#.D0.A1.D0.BE.D0.B7.D0.B4.D0.B0.D0.BD.D0.B8.D0.B5_.D1.82.D0.B5.D1.81.D1.82.D0.BE.D0.B2.D1.8B.D1.85_.D0.B4.D0.B0.D0.BD.D0.BD.D1.8B.D1.85"><span class="tocnumber">1.6</span> <span class="toctext">Создание тестовых данных</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="http://wikijava.it-cache.net/index.php@title=Glava_15_Thinking_in_Java_4th_edition.html#.D0.93.D0.B5.D0.BD.D0.B5.D1.80.D0.B0.D1.82.D0.BE.D1.80.D1.8B_.D0.B4.D0.B0.D0.BD.D0.BD.D1.8B.D1.85"><span class="tocnumber">1.7</span> <span class="toctext">Генераторы данных</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="http://wikijava.it-cache.net/index.php@title=Glava_15_Thinking_in_Java_4th_edition.html#.D0.A1.D0.BE.D0.B7.D0.B4.D0.B0.D0.BD.D0.B8.D0.B5_.D0.BC.D0.B0.D1.81.D1.81.D0.B8.D0.B2.D0.BE.D0.B2_.D1.81_.D0.B8.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5.D0.BC_.D0.B3.D0.B5.D0.BD.D0.B5.D1.80.D0.B0.D1.82.D0.BE.D1.80.D0.BE.D0.B2"><span class="tocnumber">1.8</span> <span class="toctext">Создание массивов с использованием генераторов</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="http://wikijava.it-cache.net/index.php@title=Glava_15_Thinking_in_Java_4th_edition.html#.D0.92.D1.81.D0.BF.D0.BE.D0.BC.D0.BE.D0.B3.D0.B0.D1.82.D0.B5.D0.BB.D1.8C.D0.BD.D1.8B.D0.B9_.D0.B8.D0.BD.D1.81.D1.82.D1.80.D1.83.D0.BC.D0.B5.D0.BD.D1.82.D0.B0.D1.80.D0.B8.D0.B9_Arrays"><span class="tocnumber">1.9</span> <span class="toctext">Вспомогательный инструментарий Arrays</span></a>
<ul>
<li class="toclevel-3 tocsection-11"><a href="http://wikijava.it-cache.net/index.php@title=Glava_15_Thinking_in_Java_4th_edition.html#.D0.9A.D0.BE.D0.BF.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.BC.D0.B0.D1.81.D1.81.D0.B8.D0.B2.D0.B0"><span class="tocnumber">1.9.1</span> <span class="toctext">Копирование массива</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="http://wikijava.it-cache.net/index.php@title=Glava_15_Thinking_in_Java_4th_edition.html#.D0.A1.D1.80.D0.B0.D0.B2.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BC.D0.B0.D1.81.D1.81.D0.B8.D0.B2.D0.BE.D0.B2"><span class="tocnumber">1.9.2</span> <span class="toctext">Сравнение массивов</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="http://wikijava.it-cache.net/index.php@title=Glava_15_Thinking_in_Java_4th_edition.html#.D0.A1.D1.80.D0.B0.D0.B2.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5_.D1.8D.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82.D0.BE.D0.B2_.D0.BC.D0.B0.D1.81.D1.81.D0.B8.D0.B2.D0.BE.D0.B2"><span class="tocnumber">1.9.3</span> <span class="toctext">Сравнение элементов массивов</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="http://wikijava.it-cache.net/index.php@title=Glava_15_Thinking_in_Java_4th_edition.html#.D0.A1.D0.BE.D1.80.D1.82.D0.B8.D1.80.D0.BE.D0.B2.D0.BA.D0.B0_.D0.BC.D0.B0.D1.81.D1.81.D0.B8.D0.B2.D0.B0"><span class="tocnumber">1.9.4</span> <span class="toctext">Сортировка массива</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="http://wikijava.it-cache.net/index.php@title=Glava_15_Thinking_in_Java_4th_edition.html#.D0.9F.D0.BE.D0.B8.D1.81.D0.BA_.D0.B2_.D0.BE.D1.82.D1.81.D0.BE.D1.80.D1.82.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.BD.D0.BE.D0.BC_.D0.BC.D0.B0.D1.81.D1.81.D0.B8.D0.B2.D0.B5"><span class="tocnumber">1.9.5</span> <span class="toctext">Поиск в отсортированном массиве</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-16"><a href="http://wikijava.it-cache.net/index.php@title=Glava_15_Thinking_in_Java_4th_edition.html#.D0.A0.D0.B5.D0.B7.D1.8E.D0.BC.D0.B5"><span class="tocnumber">1.10</span> <span class="toctext">Резюме</span></a></li>
</ul>
</li>
</ul>
</div>

</td></tr></tbody></table>
<h1><span class="mw-headline" id=".D0.9C.D0.90.D0.A1.D0.A1.D0.98.D0.92.D0.AB"><b>МАССИВЫ</b></span></h1>
<p>В конце главы 5 было показано, как определить и инициализировать 
массив. Программист создает и инициализирует массивы, извлекает из них 
элементы по целочисленным индексам, а размер массива остается 
неизменным. Как правило, при работе с массивами этого вполне достаточно,
 но иногда приходится выполнять более сложные операции, а также 
оценивать эффективность массива по сравнению с другими контейнерами. В 
этой главе массивы рассматри­ваются на более глубоком уровне.
</p><p><br>
</p>
<h2><span class="mw-headline" id=".D0.9E.D1.81.D0.BE.D0.B1.D0.B5.D0.BD.D0.BD.D0.BE.D1.81.D1.82.D0.B8_.D0.BC.D0.B0.D1.81.D1.81.D0.B8.D0.B2.D0.BE.D0.B2">Особенности массивов</span></h2>
<p>В <i>Java</i> существует немало разных способов хранения объектов, почему же массивы занимают особое место?
</p><p>Массивы отличаются от других контейнеров по трем показателям: 
эффективность, типизация и возможность хранения примитивов. Массивы <i>Java</i>
 являются самым эффективным средством хранения и произвольного доступа к
 последовательности ссылок на объекты. Массив представляет собой простую
 линейную последовательность, благодаря чему обращения к элементам 
осуществляются чрезвычайно быстро. За скорость приходится расплачиваться
 тем, что размер объекта массива фиксируется и не может изменяться на 
протяжении его жизненного цикла. Как говорилось в главе 11, контейнер <i><b>ArrayList</b></i>
 способен автоматически выделять, дополнительное пространство, выделяя 
новый блок памяти и перемещая в него все ссылки из старого. Хотя обычно <i><b>ArrayList</b></i> отдается предпочтение перед массивами, за гибкость приходится расплачиваться, и <i><b>ArrayList</b></i> значительно уступает по эффективности обычному массиву.
</p><p>И массивы, и контейнеры защищены от возможных злоупотреблений. 
При выходе за границу массива или контейнера происходит исключение <i><b>RuntimeException</b></i>, свидетельствующее об ошибке программиста.
</p><p>До появления параметризации другим контейнерным классам 
приходилось работать с объектами так, как если бы они не имели 
определенного типа. Иначе говоря, объекты рассматривались как 
принадлежащие к типу <i><b>Object</b></i>, корневому для всей иерархии классов в <i>Java</i>.
 Массивы удобнее «старых» контейнеров тем, что массив создается для 
хранения конкретного типа. Проверка типов на стадии компиляции не 
позволит использовать неверный тип или неверно интерпретировать 
извлекаемый тип. Конечно, <i>Java</i> так или иначе запретит отправить 
неподходящее сообщение объекту на стадии компиляции или выполнения, так 
что ни один из способов не является более рискованным по сравнению с 
другим. Просто будет удобнее, если компилятор укажет на существующую 
проблему, и снижается вероятность того, что пользователь программы 
получит неожиданное исключение.
</p><p>Массив может содержать примитивные типы, а «старые» контейнеры — 
нет. С другой стороны, параметризованные контейнеры могут проверять тип 
хранимых объектов, а благодаря автоматической упаковке они работают так,
 как если бы поддерживали хранение примитивов, поскольку преобразование 
выполняется автоматически. В следующем примере массивы сравниваются с 
параметризованными контейнерами:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"><span class="co1">//: arrays/ContainerComparison.java</span>
<span class="kw2">import</span> <span class="co2">java.util.*</span><span class="sy0">;</span>
<span class="kw2">import</span> <span class="kw2">static</span> <span class="co2">net.mindview.util.Print.*</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">class</span> BerylliumSphere <span class="br0">{</span>
  <span class="kw2">private</span> <span class="kw2">static</span> <span class="kw3">long</span> counter<span class="sy0">;</span>
  <span class="kw2">private</span> <span class="kw2">final</span> <span class="kw3">long</span> id = counter++<span class="sy0">;</span>
  <span class="kw2">public</span> <span class="kw21">String</span> toString<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span> <span class="kw2">return</span> <span class="st0">"Sphere "</span> + id<span class="sy0">;</span> <span class="br0">}</span>
<span class="br0">}</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">class</span> ContainerComparison <span class="br0">{</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">void</span> main<span class="br0">(</span><span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
    BerylliumSphere<span class="br0">[</span><span class="br0">]</span> spheres = <span class="kw2">new</span> BerylliumSphere<span class="br0">[</span><span class="nu0">10</span><span class="br0">]</span><span class="sy0">;</span>
    <span class="kw1">for</span><span class="br0">(</span><span class="kw3">int</span> i = <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> <span class="nu0">5</span><span class="sy0">;</span> i++<span class="br0">)</span>
      spheres<span class="br0">[</span>i<span class="br0">]</span> = <span class="kw2">new</span> BerylliumSphere<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>spheres<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span>spheres<span class="br0">[</span><span class="nu0">4</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
    <span class="kw166">List</span><span class="sy0">&lt;</span>BerylliumSphere<span class="sy0">&gt;</span> sphereList =
      <span class="kw2">new</span> <span class="kw46">ArrayList</span><span class="sy0">&lt;</span>BerylliumSphere<span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw1">for</span><span class="br0">(</span><span class="kw3">int</span> i = <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> <span class="nu0">5</span><span class="sy0">;</span> i++<span class="br0">)</span>
      sphereList.<span class="me1">add</span><span class="br0">(</span><span class="kw2">new</span> BerylliumSphere<span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span>sphereList<span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span>sphereList.<span class="me1">get</span><span class="br0">(</span><span class="nu0">4</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
    <span class="kw3">int</span><span class="br0">[</span><span class="br0">]</span> integers = <span class="br0">{</span> <span class="nu0">0</span>, <span class="nu0">1</span>, <span class="nu0">2</span>, <span class="nu0">3</span>, <span class="nu0">4</span>, <span class="nu0">5</span> <span class="br0">}</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>integers<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span>integers<span class="br0">[</span><span class="nu0">4</span><span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
    <span class="kw166">List</span><span class="sy0">&lt;</span><span class="kw21">Integer</span><span class="sy0">&gt;</span> intList = <span class="kw2">new</span> <span class="kw46">ArrayList</span><span class="sy0">&lt;</span><span class="kw21">Integer</span><span class="sy0">&gt;</span><span class="br0">(</span>
      <span class="kw46">Arrays</span>.<span class="me1">asList</span><span class="br0">(</span><span class="nu0">0</span>, <span class="nu0">1</span>, <span class="nu0">2</span>, <span class="nu0">3</span>, <span class="nu0">4</span>, <span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    intList.<span class="me1">add</span><span class="br0">(</span><span class="nu0">97</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span>intList<span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span>intList.<span class="me1">get</span><span class="br0">(</span><span class="nu0">4</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<p>&lt;spoiler text="Output:"&gt;
</p>
<pre>[Sphere 0, Sphere 1, Sphere 2, Sphere 3, Sphere 4, null, null, null, null, null]
Sphere 4
[Sphere 5, Sphere 6, Sphere 7, Sphere 8, Sphere 9]
Sphere 9
[0, 1, 2, 3, 4, 5]
4
[0, 1, 2, 3, 4, 5, 97]
</pre>
<p>&lt;/spoiler&gt;
Оба способа хранения объектов обеспечивают проверку типов, а 
единственное очевидное различие заключается в том, что массивы 
используют для обращения к элементам конструкцию <i><b>[ ]</b></i>, a <i><b>List</b></i> — методы вроде <i><b>add()</b></i> или <i><b>get()</b></i>. Разра­ботчики языка намеренно сделали массивы и <i><b>ArrayList</b></i>
 настолько похожими, чтобы программисту было концептуально проще 
переключаться между ними. Но, как было показано в главе 11, контейнеры 
обладают более широкими воз­можностями, чем массивы.
С появлением механизма автоматической упаковки контейнеры по удобству 
работы с примитивами почти не уступают массивам. Единственным реальным 
преимуществом массивов остается их эффективность. Впрочем, при решении 
более общих проблем может оказаться, что возможности массивов слишком 
ограничены, и тогда приходится пользоваться контейнерными классами.
</p>
<h2><span class="mw-headline" id=".D0.9C.D0.B0.D1.81.D1.81.D0.B8.D0.B2_.D0.BA.D0.B0.D0.BA_.D0.BE.D0.B1.D1.8A.D0.B5.D0.BA.D1.82">Массив как объект</span></h2>
<p>С каким бы типом массива вы ни работали, идентификатор массива в 
действительности представляет собой ссылку на объект, созданный в 
динамической памяти. Этот объект содержит ссылки на другие объекты и 
создается либо неявно (в синтаксисе инициализации массива), либо явно 
конструкцией <i><b>new</b></i>. Одной из частей объекта массива (а по сути, единственным доступным полем) является доступная только для чтения переменная <i><b>length</b></i>,
 которая указывает, сколько элементов может храниться в объекте массива.
 Весь доступ к объекту массива ограничивается синтаксисом <i><b>[ ]</b></i>.
Следующий пример демонстрирует различные способы инициализации массивов и
 присваивания ссылок на массивы. Он также наглядно показывает, что 
массивы объектов и массивы примитивных типов практически идентичны. 
Единственное различие заключается в том, что массивы объектов содержат 
ссылки, а массивы примитивов содержат сами примитивные значения.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"><span class="co1">//: arrays/ArrayOptions.java</span>
<span class="co1">// Инициализация и повторное присваивание массивов</span>
<span class="kw2">import</span> <span class="co2">java.util.*</span><span class="sy0">;</span>
<span class="kw2">import</span> <span class="kw2">static</span> <span class="co2">net.mindview.util.Print.*</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">class</span> ArrayOptions <span class="br0">{</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">void</span> main<span class="br0">(</span><span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
    <span class="co1">// Массивы объектов:</span>
    BerylliumSphere<span class="br0">[</span><span class="br0">]</span> a<span class="sy0">;</span> <span class="co1">// Локальная неинициализированная переменная</span>
    BerylliumSphere<span class="br0">[</span><span class="br0">]</span> b = <span class="kw2">new</span> BerylliumSphere<span class="br0">[</span><span class="nu0">5</span><span class="br0">]</span><span class="sy0">;</span>
    <span class="co1">// Ссылки в массиве автоматически инициализируются null:</span>
    print<span class="br0">(</span><span class="st0">"b: "</span> + <span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>b<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    BerylliumSphere<span class="br0">[</span><span class="br0">]</span> c = <span class="kw2">new</span> BerylliumSphere<span class="br0">[</span><span class="nu0">4</span><span class="br0">]</span><span class="sy0">;</span>
    <span class="kw1">for</span><span class="br0">(</span><span class="kw3">int</span> i = <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> c.<span class="me1">length</span><span class="sy0">;</span> i++<span class="br0">)</span>
      <span class="kw1">if</span><span class="br0">(</span>c<span class="br0">[</span>i<span class="br0">]</span> == <span class="kw4">null</span><span class="br0">)</span> <span class="co1">// Проверка ссылки на действительность</span>
        c<span class="br0">[</span>i<span class="br0">]</span> = <span class="kw2">new</span> BerylliumSphere<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="co1">// Агрегатная инициализация:</span>
    BerylliumSphere<span class="br0">[</span><span class="br0">]</span> d = <span class="br0">{</span> <span class="kw2">new</span> BerylliumSphere<span class="br0">(</span><span class="br0">)</span>,
      <span class="kw2">new</span> BerylliumSphere<span class="br0">(</span><span class="br0">)</span>, <span class="kw2">new</span> BerylliumSphere<span class="br0">(</span><span class="br0">)</span>
    <span class="br0">}</span><span class="sy0">;</span>
    <span class="co1">// Динамическая агрегатная инициализация:</span>
    a = <span class="kw2">new</span> BerylliumSphere<span class="br0">[</span><span class="br0">]</span><span class="br0">{</span>
      <span class="kw2">new</span> BerylliumSphere<span class="br0">(</span><span class="br0">)</span>, <span class="kw2">new</span> BerylliumSphere<span class="br0">(</span><span class="br0">)</span>,
    <span class="br0">}</span><span class="sy0">;</span>
    <span class="co1">// (Завершающая запятая не обязательна в обоих случаях)</span>
    print<span class="br0">(</span><span class="st0">"a.length = "</span> + a.<span class="me1">length</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"b.length = "</span> + b.<span class="me1">length</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"c.length = "</span> + c.<span class="me1">length</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"d.length = "</span> + d.<span class="me1">length</span><span class="br0">)</span><span class="sy0">;</span>
    a = d<span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"a.length = "</span> + a.<span class="me1">length</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
    <span class="co1">// Массивы примитивов:</span>
    <span class="kw3">int</span><span class="br0">[</span><span class="br0">]</span> e<span class="sy0">;</span> <span class="co1">// Ссылка null</span>
    <span class="kw3">int</span><span class="br0">[</span><span class="br0">]</span> f = <span class="kw2">new</span> <span class="kw3">int</span><span class="br0">[</span><span class="nu0">5</span><span class="br0">]</span><span class="sy0">;</span>
    <span class="co1">// Примитивы в массиве автоматически инициализируются нулями:</span>
    print<span class="br0">(</span><span class="st0">"f: "</span> + <span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>f<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw3">int</span><span class="br0">[</span><span class="br0">]</span> g = <span class="kw2">new</span> <span class="kw3">int</span><span class="br0">[</span><span class="nu0">4</span><span class="br0">]</span><span class="sy0">;</span>
    <span class="kw1">for</span><span class="br0">(</span><span class="kw3">int</span> i = <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> g.<span class="me1">length</span><span class="sy0">;</span> i++<span class="br0">)</span>
      g<span class="br0">[</span>i<span class="br0">]</span> = i<span class="sy0">*</span>i<span class="sy0">;</span>
    <span class="kw3">int</span><span class="br0">[</span><span class="br0">]</span> h = <span class="br0">{</span> <span class="nu0">11</span>, <span class="nu0">47</span>, <span class="nu0">93</span> <span class="br0">}</span><span class="sy0">;</span>
    <span class="co1">// Ошибка компиляции переменная e не инициализирована:</span>
    <span class="co1">//!print("e.length = " + e.length);</span>
    print<span class="br0">(</span><span class="st0">"f.length = "</span> + f.<span class="me1">length</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"g.length = "</span> + g.<span class="me1">length</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"h.length = "</span> + h.<span class="me1">length</span><span class="br0">)</span><span class="sy0">;</span>
    e = h<span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"e.length = "</span> + e.<span class="me1">length</span><span class="br0">)</span><span class="sy0">;</span>
    e = <span class="kw2">new</span> <span class="kw3">int</span><span class="br0">[</span><span class="br0">]</span><span class="br0">{</span> <span class="nu0">1</span>, <span class="nu0">2</span> <span class="br0">}</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"e.length = "</span> + e.<span class="me1">length</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<p>&lt;spoiler text="Output:"&gt;
</p>
<pre>b: [null, null, null, null, null]
a.length = 2
b.length = 5
c.length = 4
d.length = 3
a.length = 3
f: [0, 0, 0, 0, 0]
f.length = 5
g.length = 4
h.length = 3
e.length = 3
e.length = 2
</pre>
<p>&lt;/spoiler&gt;
Массив <i><b>а</b></i> — неинициализированная локальная переменная, и 
компилятор не позволяет что-либо делать с этой ссылкой до тех пор, пока 
она не будет соответствующим образом инициализирована. Массив <i><b>b</b></i> инициализируется массивом ссылок на объекты <i><b>BerylliumSpere</b></i>, хотя ни один такой объект в массив не заносится. Несмотря на это, мы можем запросить размер массива, потому что <i><b>b</b></i> указывает на действительный объект. В этом проявляется некоторый недостаток массивов: поле <i><b>length</b></i>
 сообщает, сколько элементов может быть помещено в массив, то есть 
размер объекта массива, а не количество хранящихся в нем элементов. Тем 
не менее при создании объекта массива все ссылки автоматически 
инициализируются значением <i><b>null</b></i>, и, чтобы узнать, связан ли некоторый элемент массива с объектом, достаточно проверить ссылку на равенство <i><b>null</b></i>. Аналогично, массивы примитивных типов автоматически инициализируются нулями для числовых типов: <i><b>(char)0</b></i> для <i><b>char</b></i> и <i><b>false</b></i> для <i><b>boolean</b></i>.
Массив с демонстрирует создание массива с последующим присваиванием объектов <i><b>BerylliumSphere</b></i> всем элементам массива. Массив <i><b>d</b></i> демонстрирует синтаксис «агрегатной инициализации», при котором объект массива создается (с ключевым словом <i><b>new</b></i>, как массив <i><b>с</b></i>) и инициализируется объектами <i><b>BerylliumSphere</b></i>,
 причем все это происходит в одной команде.
Следующую конструкцию инициализации массива можно назвать «динамической 
агрегатной инициализацией». Агрегатная инициализация, используемая <i><b>d</b></i>, должна использоваться в точке определения <i><b>d</b></i>, но при втором синтаксисе объект массива может создаваться и использоваться в любой точке. Предположим, методу <i><b>hide()</b></i> передается массив объектов <i><b>BerylliumSphere</b></i>. Его вызов может выглядеть так:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"> hide<span class="br0">(</span>d<span class="br0">)</span><span class="sy0">;</span></pre></div></div>
<p>однако массив, передаваемый в аргументе, также можно создать динамически:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"> hide<span class="br0">(</span><span class="kw2">new</span> BerylliumSphere<span class="br0">[</span><span class="br0">]</span><span class="br0">{</span> <span class="kw2">new</span> BeryllіumSphere<span class="br0">(</span><span class="br0">)</span>, <span class="kw2">new</span> BerylliumSphere<span class="br0">(</span><span class="br0">)</span> <span class="br0">}</span><span class="br0">)</span><span class="sy0">;</span></pre></div></div>
<p>Во многих ситуациях такой синтаксис оказывается более удобным.
</p><p>Выражение
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"> a=d<span class="sy0">;</span></pre></div></div>
<p>показывает, как взять ссылку, связанную с одним объектом массива, и 
присвоить ее другому объекту массива, как это делается с любым другим 
типом ссылки на объект. В результате <i><b>a</b></i> и <i><b>d</b></i> указывают на один объект массива в куче. Вторая часть<i><b> ArrayOptions.java</b></i>
 показывает, что примитивные массивы работают точно так же, как массивы 
объектов, за исключением того, что примитивные значения сохраняются в 
них напрямую.
</p><p><br>
</p>
<h2><span class="mw-headline" id=".D0.92.D0.BE.D0.B7.D0.B2.D1.80.D0.B0.D1.82_.D0.BC.D0.B0.D1.81.D1.81.D0.B8.D0.B2.D0.B0">Возврат массива</span></h2>
<p>Предположим, вы пишете метод, который должен возвращать не отдельное значение, а целый набор значений. В таких языках, как <i>C</i> и <i>C++</i>, это сделать нелегко, потому что возвращается из метода не массив, а только указатель на массив.
При этом возникают проблемы, поскольку сложности с управлением жизненным циклом массива могут привести к утечке памяти.
В <i>Java</i> вы просто возвращаете массив. Вам не нужно беспокоиться о 
нем — массив будет существовать до тех пор, пока он вам нужен, а когда 
надобность в нем отпадет, массив будет уничтожен уборщиком мусора. В 
качестве примера рассмотрим возвращение массива <i><b>String</b></i>:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"><span class="co1">//: arrays/IceCream.java</span>
<span class="co1">// Возвращение массивов из методов</span>
<span class="kw2">import</span> <span class="co2">java.util.*</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">class</span> IceCream <span class="br0">{</span>
  <span class="kw2">private</span> <span class="kw2">static</span> <span class="kw46">Random</span> rand = <span class="kw2">new</span> <span class="kw46">Random</span><span class="br0">(</span><span class="nu0">47</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="kw2">static</span> <span class="kw2">final</span> <span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span> FLAVORS = <span class="br0">{</span>
    <span class="st0">"Chocolate"</span>, <span class="st0">"Strawberry"</span>, <span class="st0">"Vanilla Fudge Swirl"</span>,
    <span class="st0">"Mint Chip"</span>, <span class="st0">"Mocha Almond Fudge"</span>, <span class="st0">"Rum Raisin"</span>,
    <span class="st0">"Praline Cream"</span>, <span class="st0">"Mud Pie"</span>
  <span class="br0">}</span><span class="sy0">;</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span> flavorSet<span class="br0">(</span><span class="kw3">int</span> n<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw1">if</span><span class="br0">(</span>n <span class="sy0">&gt;</span> FLAVORS.<span class="me1">length</span><span class="br0">)</span>
      <span class="kw2">throw</span> <span class="kw2">new</span> <span class="kw21">IllegalArgumentException</span><span class="br0">(</span><span class="st0">"Set too big"</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span> results = <span class="kw2">new</span> <span class="kw21">String</span><span class="br0">[</span>n<span class="br0">]</span><span class="sy0">;</span>
    <span class="kw3">boolean</span><span class="br0">[</span><span class="br0">]</span> picked = <span class="kw2">new</span> <span class="kw3">boolean</span><span class="br0">[</span>FLAVORS.<span class="me1">length</span><span class="br0">]</span><span class="sy0">;</span>
    <span class="kw1">for</span><span class="br0">(</span><span class="kw3">int</span> i = <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> n<span class="sy0">;</span> i++<span class="br0">)</span> <span class="br0">{</span>
      <span class="kw3">int</span> t<span class="sy0">;</span>
      <span class="kw1">do</span>
        t = rand.<span class="me1">nextInt</span><span class="br0">(</span>FLAVORS.<span class="me1">length</span><span class="br0">)</span><span class="sy0">;</span>
      <span class="kw1">while</span><span class="br0">(</span>picked<span class="br0">[</span>t<span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span>
      results<span class="br0">[</span>i<span class="br0">]</span> = FLAVORS<span class="br0">[</span>t<span class="br0">]</span><span class="sy0">;</span>
      picked<span class="br0">[</span>t<span class="br0">]</span> = <span class="kw4">true</span><span class="sy0">;</span>
    <span class="br0">}</span>
    <span class="kw2">return</span> results<span class="sy0">;</span>
  <span class="br0">}</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">void</span> main<span class="br0">(</span><span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw1">for</span><span class="br0">(</span><span class="kw3">int</span> i = <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> <span class="nu0">7</span><span class="sy0">;</span> i++<span class="br0">)</span>
      <span class="kw21">System</span>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">(</span><span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>flavorSet<span class="br0">(</span><span class="nu0">3</span><span class="br0">)</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<p>&lt;spoiler text="Output:"&gt;
</p>
<pre>[Rum Raisin, Mint Chip, Mocha Almond Fudge]
[Chocolate, Strawberry, Mocha Almond Fudge]
[Strawberry, Mint Chip, Mocha Almond Fudge]
[Rum Raisin, Vanilla Fudge Swirl, Mud Pie]
[Vanilla Fudge Swirl, Chocolate, Mocha Almond Fudge]
[Praline Cream, Strawberry, Mocha Almond Fudge]
[Mocha Almond Fudge, Strawberry, Mint Chip]
</pre>
<p>&lt;/spoiler&gt;
Метод <i><b>flavorSet()</b></i> создает массив <i><b>results</b></i> с элементами <i><b>String</b></i>. Размер массива равен <i><b>n</b></i>; он определяется аргументом, передаваемым при вызове метода. Далее метод случайным образом выбирает элементы из массива <i><b>FLAVORS</b></i> и помещает их в массив <i><b>results</b></i>,
 возвращаемый методом. Массив возвращается точно так же, как любой 
другой объект, — по ссылке. При этом не важно, был ли массив создан 
методом <i><b>flavorSet()</b></i>, или он был создан в другом месте. 
Массив останется с вами все время, пока он будет нужен, а потом уборщик 
мусора позаботится о его уничтожении.
Из выходных данных видно, что метод <i><b>flavorSet()</b></i> действительно выбирает случайное подмножество элементов при каждом вызове.
</p><p><br>
</p>
<h2><span class="mw-headline" id=".D0.9C.D0.BD.D0.BE.D0.B3.D0.BE.D0.BC.D0.B5.D1.80.D0.BD.D1.8B.D0.B5_.D0.BC.D0.B0.D1.81.D1.81.D0.B8.D0.B2.D1.8B">Многомерные массивы</span></h2>
<p>Создание многомерных массивов в <i>Java</i> не вызывает особых сложностей. Для многомерных массивов примитивных типов каждый вектор заключается в фигурные скобки:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"><span class="co1">//: arrays/MultidimensionalPrimitiveArray.java</span>
<span class="co1">// Creating multidimensional arrays.</span>
<span class="kw2">import</span> <span class="co2">java.util.*</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">class</span> MultidimensionalPrimitiveArray <span class="br0">{</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">void</span> main<span class="br0">(</span><span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw3">int</span><span class="br0">[</span><span class="br0">]</span><span class="br0">[</span><span class="br0">]</span> a = <span class="br0">{</span>
      <span class="br0">{</span> <span class="nu0">1</span>, <span class="nu0">2</span>, <span class="nu0">3</span>, <span class="br0">}</span>,
      <span class="br0">{</span> <span class="nu0">4</span>, <span class="nu0">5</span>, <span class="nu0">6</span>, <span class="br0">}</span>,
    <span class="br0">}</span><span class="sy0">;</span>
    <span class="kw21">System</span>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">(</span><span class="kw46">Arrays</span>.<span class="me1">deepToString</span><span class="br0">(</span>a<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<p>&lt;spoiler text="Output:"&gt;
[[1, 2, 3], [4, 5, 6]]
&lt;/spoiler&gt;
Каждая вложенная пара фигурных скобок описывает новую размерность массива.
В этом примере используется метод <i>Java</i> <i>SE5</i> <i><b>Arrays.deepToString()</b></i>. Как видно из выходных данных, он преобразует многомерные массивы в <i><b>String</b></i>.
Массив также может создаваться ключевым словом <i><b>new</b></i>. Пример создания трехмерного массива выражением <i><b>new</b></i>:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"><span class="co1">//: arrays/ThreeDWithNew.java</span>
<span class="kw2">import</span> <span class="co2">java.util.*</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">class</span> ThreeDWithNew <span class="br0">{</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">void</span> main<span class="br0">(</span><span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
    <span class="co1">// 3-D array with fixed length:</span>
    <span class="kw3">int</span><span class="br0">[</span><span class="br0">]</span><span class="br0">[</span><span class="br0">]</span><span class="br0">[</span><span class="br0">]</span> a = <span class="kw2">new</span> <span class="kw3">int</span><span class="br0">[</span><span class="nu0">2</span><span class="br0">]</span><span class="br0">[</span><span class="nu0">2</span><span class="br0">]</span><span class="br0">[</span><span class="nu0">4</span><span class="br0">]</span><span class="sy0">;</span>
    <span class="kw21">System</span>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">(</span><span class="kw46">Arrays</span>.<span class="me1">deepToString</span><span class="br0">(</span>a<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<p>&lt;spoiler text="Output:"&gt;
</p>
<pre>[[[0, 0, 0, 0], [0, 0, 0, 0]], [[0, 0, 0, 0], [0, 0, 0, 0]]]
</pre>
<p>&lt;/spoiler&gt;
Как видите, если массиву примитивных типов не заданы явные значения, он 
автоматически инициализируется значениями по умолчанию. Массивы объектов
 инициализируются ссылками <i><b>null</b></i>.
Векторы массивов, образующих матрицу, могут иметь разную длину (это называется ступенчатым массивом):
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"><span class="co1">//: arrays/RaggedArray.java</span>
<span class="kw2">import</span> <span class="co2">java.util.*</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">class</span> RaggedArray <span class="br0">{</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">void</span> main<span class="br0">(</span><span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw46">Random</span> rand = <span class="kw2">new</span> <span class="kw46">Random</span><span class="br0">(</span><span class="nu0">47</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="co1">// Трехмерный массив с векторами переменной длины:</span>
    <span class="kw3">int</span><span class="br0">[</span><span class="br0">]</span><span class="br0">[</span><span class="br0">]</span><span class="br0">[</span><span class="br0">]</span> a = <span class="kw2">new</span> <span class="kw3">int</span><span class="br0">[</span>rand.<span class="me1">nextInt</span><span class="br0">(</span><span class="nu0">7</span><span class="br0">)</span><span class="br0">]</span><span class="br0">[</span><span class="br0">]</span><span class="br0">[</span><span class="br0">]</span><span class="sy0">;</span>
    <span class="kw1">for</span><span class="br0">(</span><span class="kw3">int</span> i = <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> a.<span class="me1">length</span><span class="sy0">;</span> i++<span class="br0">)</span> <span class="br0">{</span>
      a<span class="br0">[</span>i<span class="br0">]</span> = <span class="kw2">new</span> <span class="kw3">int</span><span class="br0">[</span>rand.<span class="me1">nextInt</span><span class="br0">(</span><span class="nu0">5</span><span class="br0">)</span><span class="br0">]</span><span class="br0">[</span><span class="br0">]</span><span class="sy0">;</span>
      <span class="kw1">for</span><span class="br0">(</span><span class="kw3">int</span> j = <span class="nu0">0</span><span class="sy0">;</span> j <span class="sy0">&lt;</span> a<span class="br0">[</span>i<span class="br0">]</span>.<span class="me1">length</span><span class="sy0">;</span> j++<span class="br0">)</span>
        a<span class="br0">[</span>i<span class="br0">]</span><span class="br0">[</span>j<span class="br0">]</span> = <span class="kw2">new</span> <span class="kw3">int</span><span class="br0">[</span>rand.<span class="me1">nextInt</span><span class="br0">(</span><span class="nu0">5</span><span class="br0">)</span><span class="br0">]</span><span class="sy0">;</span>
    <span class="br0">}</span>
    <span class="kw21">System</span>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">(</span><span class="kw46">Arrays</span>.<span class="me1">deepToString</span><span class="br0">(</span>a<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<p>&lt;spoiler text="Output:"&gt;
</p>
<pre>[[], [[0], [0], [0, 0, 0, 0]], [[], [0, 0], [0, 0]], 
[[0, 0, 0], [0], [0, 0, 0, 0]], 
[[0, 0, 0], [0, 0, 0], [0], []], [[0], [], [0]]]
</pre>
<p>&lt;/spoiler&gt;
Первая конструкция <i><b>new</b></i> создает массив, у которого первый элемент имеет случайную длину, а остальные остаются неопределенными. Вторая конструкция <i><b>new</b></i> в цикле <i><b>for</b></i> заполняет элементы, но оставляет третий индекс неопределенным вплоть до выполнения третьего <i><b>new</b></i>.
Массивы с не-примитивными элементами заполняются аналогичным образом. Пример объединения нескольких выражений <i><b>new</b></i> в фигурных скобках:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"><span class="co1">//: arrays/MultidimensionalObjectArrays.java</span>
<span class="kw2">import</span> <span class="co2">java.util.*</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">class</span> MultidimensionalObjectArrays <span class="br0">{</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">void</span> main<span class="br0">(</span><span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
    BerylliumSphere<span class="br0">[</span><span class="br0">]</span><span class="br0">[</span><span class="br0">]</span> spheres = <span class="br0">{</span>
      <span class="br0">{</span> <span class="kw2">new</span> BerylliumSphere<span class="br0">(</span><span class="br0">)</span>, <span class="kw2">new</span> BerylliumSphere<span class="br0">(</span><span class="br0">)</span> <span class="br0">}</span>,
      <span class="br0">{</span> <span class="kw2">new</span> BerylliumSphere<span class="br0">(</span><span class="br0">)</span>, <span class="kw2">new</span> BerylliumSphere<span class="br0">(</span><span class="br0">)</span>,
        <span class="kw2">new</span> BerylliumSphere<span class="br0">(</span><span class="br0">)</span>, <span class="kw2">new</span> BerylliumSphere<span class="br0">(</span><span class="br0">)</span> <span class="br0">}</span>,
      <span class="br0">{</span> <span class="kw2">new</span> BerylliumSphere<span class="br0">(</span><span class="br0">)</span>, <span class="kw2">new</span> BerylliumSphere<span class="br0">(</span><span class="br0">)</span>,
        <span class="kw2">new</span> BerylliumSphere<span class="br0">(</span><span class="br0">)</span>, <span class="kw2">new</span> BerylliumSphere<span class="br0">(</span><span class="br0">)</span>,
        <span class="kw2">new</span> BerylliumSphere<span class="br0">(</span><span class="br0">)</span>, <span class="kw2">new</span> BerylliumSphere<span class="br0">(</span><span class="br0">)</span>,
        <span class="kw2">new</span> BerylliumSphere<span class="br0">(</span><span class="br0">)</span>, <span class="kw2">new</span> BerylliumSphere<span class="br0">(</span><span class="br0">)</span> <span class="br0">}</span>,
    <span class="br0">}</span><span class="sy0">;</span>
    <span class="kw21">System</span>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">(</span><span class="kw46">Arrays</span>.<span class="me1">deepToString</span><span class="br0">(</span>spheres<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<p>&lt;spoiler text="Output:"&gt;
</p>
<pre>[[Sphere 0, Sphere 1], 
[Sphere 2, Sphere 3, Sphere 4, Sphere 5], 
[Sphere 6, Sphere 7, Sphere 8, Sphere 9, Sphere 10, Sphere 11, Sphere 12, Sphere 13]]
</pre>
<p>&lt;/spoiler&gt;
Массив <i><b>spheres</b></i> также является ступенчатым, то есть длины вложенных списков объектов различаются.
Механизм автоматической упаковки работает с инициализаторами массивов:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"><span class="co1">//: arrays/AutoboxingArrays.java</span>
<span class="kw2">import</span> <span class="co2">java.util.*</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">class</span> AutoboxingArrays <span class="br0">{</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">void</span> main<span class="br0">(</span><span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw21">Integer</span><span class="br0">[</span><span class="br0">]</span><span class="br0">[</span><span class="br0">]</span> a = <span class="br0">{</span> <span class="co1">// Автоматическая упаковка:</span>
      <span class="br0">{</span> <span class="nu0">1</span>, <span class="nu0">2</span>, <span class="nu0">3</span>, <span class="nu0">4</span>, <span class="nu0">5</span>, <span class="nu0">6</span>, <span class="nu0">7</span>, <span class="nu0">8</span>, <span class="nu0">9</span>, <span class="nu0">10</span> <span class="br0">}</span>,
      <span class="br0">{</span> <span class="nu0">21</span>, <span class="nu0">22</span>, <span class="nu0">23</span>, <span class="nu0">24</span>, <span class="nu0">25</span>, <span class="nu0">26</span>, <span class="nu0">27</span>, <span class="nu0">28</span>, <span class="nu0">29</span>, <span class="nu0">30</span> <span class="br0">}</span>,
      <span class="br0">{</span> <span class="nu0">51</span>, <span class="nu0">52</span>, <span class="nu0">53</span>, <span class="nu0">54</span>, <span class="nu0">55</span>, <span class="nu0">56</span>, <span class="nu0">57</span>, <span class="nu0">58</span>, <span class="nu0">59</span>, <span class="nu0">60</span> <span class="br0">}</span>,
      <span class="br0">{</span> <span class="nu0">71</span>, <span class="nu0">72</span>, <span class="nu0">73</span>, <span class="nu0">74</span>, <span class="nu0">75</span>, <span class="nu0">76</span>, <span class="nu0">77</span>, <span class="nu0">78</span>, <span class="nu0">79</span>, <span class="nu0">80</span> <span class="br0">}</span>,
    <span class="br0">}</span><span class="sy0">;</span>
    <span class="kw21">System</span>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">(</span><span class="kw46">Arrays</span>.<span class="me1">deepToString</span><span class="br0">(</span>a<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<p>&lt;spoiler text="Output:"&gt;
</p>
<pre>[[1, 2, 3, 4, 5, 6, 7, 8, 9, 10], [21, 22, 23, 24, 25, 26, 27, 28, 29, 30], 
[51, 52, 53, 54, 55, 56, 57, 58, 59, 60], [71, 72, 73, 74, 75, 76, 77, 78, 79, 80]]
</pre>
<p>&lt;/spoiler&gt;
А вот как происходит поэлементное построение массива не-примитивных объектов:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"><span class="co1">//: arrays/AssemblingMultidimensionalArrays.java</span>
<span class="co1">// Создание многомерных массивов</span>
<span class="kw2">import</span> <span class="co2">java.util.*</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">class</span> AssemblingMultidimensionalArrays <span class="br0">{</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">void</span> main<span class="br0">(</span><span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw21">Integer</span><span class="br0">[</span><span class="br0">]</span><span class="br0">[</span><span class="br0">]</span> a<span class="sy0">;</span>
    a = <span class="kw2">new</span> <span class="kw21">Integer</span><span class="br0">[</span><span class="nu0">3</span><span class="br0">]</span><span class="br0">[</span><span class="br0">]</span><span class="sy0">;</span>
    <span class="kw1">for</span><span class="br0">(</span><span class="kw3">int</span> i = <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> a.<span class="me1">length</span><span class="sy0">;</span> i++<span class="br0">)</span> <span class="br0">{</span>
      a<span class="br0">[</span>i<span class="br0">]</span> = <span class="kw2">new</span> <span class="kw21">Integer</span><span class="br0">[</span><span class="nu0">3</span><span class="br0">]</span><span class="sy0">;</span>
      <span class="kw1">for</span><span class="br0">(</span><span class="kw3">int</span> j = <span class="nu0">0</span><span class="sy0">;</span> j <span class="sy0">&lt;</span> a<span class="br0">[</span>i<span class="br0">]</span>.<span class="me1">length</span><span class="sy0">;</span> j++<span class="br0">)</span>
        a<span class="br0">[</span>i<span class="br0">]</span><span class="br0">[</span>j<span class="br0">]</span> = i <span class="sy0">*</span> j<span class="sy0">;</span> <span class="co1">// Автоматическая упаковка</span>
    <span class="br0">}</span>
    <span class="kw21">System</span>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">(</span><span class="kw46">Arrays</span>.<span class="me1">deepToString</span><span class="br0">(</span>a<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<p>&lt;spoiler text="Output:"&gt;
</p>
<pre>[[0, 0, 0], [0, 1, 2], [0, 2, 4]]
</pre>
<p>&lt;/spoiler&gt;
Выражение <i><b>i*j</b></i> присутствует только для того, чтобы поместить менее тривиальное значение в <i><b>Integer</b></i>.
Метод <i><b>Arrays.deepToString()</b></i> работает как с массивами примитивных типов, так и с массивами объектов:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"><span class="co1">//: arrays/MultiDimWrapperArray.java</span>
<span class="co1">// Multidimensional arrays of "wrapper" objects.</span>
<span class="kw2">import</span> <span class="co2">java.util.*</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">class</span> MultiDimWrapperArray <span class="br0">{</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">void</span> main<span class="br0">(</span><span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw21">Integer</span><span class="br0">[</span><span class="br0">]</span><span class="br0">[</span><span class="br0">]</span> a1 = <span class="br0">{</span> <span class="co1">// Автоматическая упаковка</span>
      <span class="br0">{</span> <span class="nu0">1</span>, <span class="nu0">2</span>, <span class="nu0">3</span>, <span class="br0">}</span>,
      <span class="br0">{</span> <span class="nu0">4</span>, <span class="nu0">5</span>, <span class="nu0">6</span>, <span class="br0">}</span>,
    <span class="br0">}</span><span class="sy0">;</span>
    <span class="kw21">Double</span><span class="br0">[</span><span class="br0">]</span><span class="br0">[</span><span class="br0">]</span><span class="br0">[</span><span class="br0">]</span> a2 = <span class="br0">{</span> <span class="co1">// Автоматическая упаковка</span>
      <span class="br0">{</span> <span class="br0">{</span> <span class="nu0">1.1</span>, <span class="nu0">2.2</span> <span class="br0">}</span>, <span class="br0">{</span> <span class="nu0">3.3</span>, <span class="nu0">4.4</span> <span class="br0">}</span> <span class="br0">}</span>,
      <span class="br0">{</span> <span class="br0">{</span> <span class="nu0">5.5</span>, <span class="nu0">6.6</span> <span class="br0">}</span>, <span class="br0">{</span> <span class="nu0">7.7</span>, <span class="nu0">8.8</span> <span class="br0">}</span> <span class="br0">}</span>,
      <span class="br0">{</span> <span class="br0">{</span> <span class="nu0">9.9</span>, <span class="nu0">1.2</span> <span class="br0">}</span>, <span class="br0">{</span> <span class="nu0">2.3</span>, <span class="nu0">3.4</span> <span class="br0">}</span> <span class="br0">}</span>,
    <span class="br0">}</span><span class="sy0">;</span>
    <span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span><span class="br0">[</span><span class="br0">]</span> a3 = <span class="br0">{</span>
      <span class="br0">{</span> <span class="st0">"The"</span>, <span class="st0">"Quick"</span>, <span class="st0">"Sly"</span>, <span class="st0">"Fox"</span> <span class="br0">}</span>,
      <span class="br0">{</span> <span class="st0">"Jumped"</span>, <span class="st0">"Over"</span> <span class="br0">}</span>,
      <span class="br0">{</span> <span class="st0">"The"</span>, <span class="st0">"Lazy"</span>, <span class="st0">"Brown"</span>, <span class="st0">"Dog"</span>, <span class="st0">"and"</span>, <span class="st0">"friend"</span> <span class="br0">}</span>,
    <span class="br0">}</span><span class="sy0">;</span>
    <span class="kw21">System</span>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">(</span><span class="st0">"a1: "</span> + <span class="kw46">Arrays</span>.<span class="me1">deepToString</span><span class="br0">(</span>a1<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw21">System</span>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">(</span><span class="st0">"a2: "</span> + <span class="kw46">Arrays</span>.<span class="me1">deepToString</span><span class="br0">(</span>a2<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw21">System</span>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">(</span><span class="st0">"a3: "</span> + <span class="kw46">Arrays</span>.<span class="me1">deepToString</span><span class="br0">(</span>a3<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<p>&lt;spoiler text="Output:"&gt;
</p>
<pre>a1: [[1, 2, 3], [4, 5, 6]]
a2: [[[1.1, 2.2], [3.3, 4.4]], [[5.5, 6.6], [7.7, 8.8]], [[9.9, 1.2], [2.3, 3.4]]]
a3: [[The, Quick, Sly, Fox], [Jumped, Over], [The, Lazy, Brown, Dog, and, friend]]
</pre>
<p>&lt;/spoiler&gt;
И снова в массивах <i><b>Integer</b></i> и <i><b>Double</b></i> механизм автоматической упаковки <i>Java</i> <i>SE5</i> создает необходимые объекты-«обертки».
</p>
<h2><span class="mw-headline" id=".D0.9C.D0.B0.D1.81.D1.81.D0.B8.D0.B2.D1.8B_.D0.B8_.D0.BF.D0.B0.D1.80.D0.B0.D0.BC.D0.B5.D1.82.D1.80.D0.B8.D0.B7.D0.B0.D1.86.D0.B8.D1.8F">Массивы и параметризация</span></h2>
<p>В общем случае массивы и параметризация плохо сочетаются друг с 
другом. Например, массивы не могут инициализироваться параметризованными
 типами:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"> Peel<span class="sy0">&lt;</span>Banana<span class="sy0">&gt;</span><span class="br0">[</span><span class="br0">]</span> peels = <span class="kw2">new</span> Peel<span class="sy0">&lt;</span>Banana<span class="sy0">&gt;</span><span class="br0">[</span><span class="nu0">10</span><span class="br0">]</span>: <span class="co1">// He разрешено</span></pre></div></div>
<p>Стирание удаляет информацию о параметре типа, а массив должен знать 
точный тип хранящихся в нем объектов для обеспечения безопасности типов.
 Впрочем, параметризовать можно сам тип массива:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"><span class="co1">//: arrays/ParameterizedArrayType.java</span>
<span class="kw2">class</span> ClassParameter<span class="sy0">&lt;</span>T<span class="sy0">&gt;</span> <span class="br0">{</span>
  <span class="kw2">public</span> T<span class="br0">[</span><span class="br0">]</span> f<span class="br0">(</span>T<span class="br0">[</span><span class="br0">]</span> arg<span class="br0">)</span> <span class="br0">{</span> <span class="kw2">return</span> arg<span class="sy0">;</span> <span class="br0">}</span>
<span class="br0">}</span>
&nbsp;
<span class="kw2">class</span> MethodParameter <span class="br0">{</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="sy0">&lt;</span>T<span class="sy0">&gt;</span> T<span class="br0">[</span><span class="br0">]</span> f<span class="br0">(</span>T<span class="br0">[</span><span class="br0">]</span> arg<span class="br0">)</span> <span class="br0">{</span> <span class="kw2">return</span> arg<span class="sy0">;</span> <span class="br0">}</span>
<span class="br0">}</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">class</span> ParameterizedArrayType <span class="br0">{</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">void</span> main<span class="br0">(</span><span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw21">Integer</span><span class="br0">[</span><span class="br0">]</span> ints = <span class="br0">{</span> <span class="nu0">1</span>, <span class="nu0">2</span>, <span class="nu0">3</span>, <span class="nu0">4</span>, <span class="nu0">5</span> <span class="br0">}</span><span class="sy0">;</span>
    <span class="kw21">Double</span><span class="br0">[</span><span class="br0">]</span> doubles = <span class="br0">{</span> <span class="nu0">1.1</span>, <span class="nu0">2.2</span>, <span class="nu0">3.3</span>, <span class="nu0">4.4</span>, <span class="nu0">5.5</span> <span class="br0">}</span><span class="sy0">;</span>
    <span class="kw21">Integer</span><span class="br0">[</span><span class="br0">]</span> ints2 =
      <span class="kw2">new</span> ClassParameter<span class="sy0">&lt;</span><span class="kw21">Integer</span><span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">f</span><span class="br0">(</span>ints<span class="br0">)</span><span class="sy0">;</span>
    <span class="kw21">Double</span><span class="br0">[</span><span class="br0">]</span> doubles2 =
      <span class="kw2">new</span> ClassParameter<span class="sy0">&lt;</span><span class="kw21">Double</span><span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span>.<span class="me1">f</span><span class="br0">(</span>doubles<span class="br0">)</span><span class="sy0">;</span>
    ints2 = MethodParameter.<span class="me1">f</span><span class="br0">(</span>ints<span class="br0">)</span><span class="sy0">;</span>
    doubles2 = MethodParameter.<span class="me1">f</span><span class="br0">(</span>doubles<span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<p>Обратите внимание, как удобно использовать параметризованный метод 
вместо параметризованного класса: вам не придется создавать очередную 
«версию» класса с параметром для каждого типа, к которому он 
применяется, и его можно сделать <i><b>static</b></i>. Конечно, 
параметризованный класс не всегда можно заменить параметризованным 
методом, но такое решение может оказаться предпочтительным.
</p><p>Как выясняется, не совсем правильно говорить, что вы не можете 
создавать массивы параметризованных типов. Действительно, компилятор не 
позволит создать экземпляр массива параметризованного типа, но вы можете
 создать ссылку на такой массив. Пример:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"> <span class="kw166">List</span><span class="sy0">&lt;</span><span class="kw21">String</span><span class="sy0">&gt;</span><span class="br0">[</span><span class="br0">]</span> Is<span class="sy0">;</span></pre></div></div>
<p>Такая конструкция проходит проверку без малейших возражений со 
стороны компилятора. И хотя вы не можете создать объект массива с 
параметризацией, можно создать объект непараметризованного типа и 
преобразовать его:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"><span class="co1">//: arrays/ArrayOfGenerics.java</span>
<span class="co1">// Возможность создания массивов параметризованных типов.</span>
<span class="kw2">import</span> <span class="co2">java.util.*</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">class</span> ArrayOfGenerics <span class="br0">{</span>
  @<span class="kw21">SuppressWarnings</span><span class="br0">(</span><span class="st0">"unchecked"</span><span class="br0">)</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">void</span> main<span class="br0">(</span><span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw166">List</span><span class="sy0">&lt;</span><span class="kw21">String</span><span class="sy0">&gt;</span><span class="br0">[</span><span class="br0">]</span> ls<span class="sy0">;</span>
    <span class="kw166">List</span><span class="br0">[</span><span class="br0">]</span> la = <span class="kw2">new</span> <span class="kw166">List</span><span class="br0">[</span><span class="nu0">10</span><span class="br0">]</span><span class="sy0">;</span>
    ls = <span class="br0">(</span><span class="kw166">List</span><span class="sy0">&lt;</span><span class="kw21">String</span><span class="sy0">&gt;</span><span class="br0">[</span><span class="br0">]</span><span class="br0">)</span>la<span class="sy0">;</span> <span class="co1">//Предупреждение о</span>
    <span class="co1">// непроверенном преобразовании</span>
    ls<span class="br0">[</span><span class="nu0">0</span><span class="br0">]</span> = <span class="kw2">new</span> <span class="kw46">ArrayList</span><span class="sy0">&lt;</span><span class="kw21">String</span><span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="co1">// Приводит к ошибке на стадии компиляции&nbsp;:</span>
    <span class="co1">//! ls[1] = new ArrayList&lt;Integer&gt;();</span>
&nbsp;
    <span class="co1">// Проблема: List&lt;String&gt; является подтипом Object</span>
    <span class="kw166">Object</span><span class="br0">[</span><span class="br0">]</span> objects = ls<span class="sy0">;</span> <span class="co1">// Поэтому присваивание возможно </span>
    <span class="co1">// Компилируется и выполняется без ошибок и предупреждений&nbsp;:</span>
    objects<span class="br0">[</span><span class="nu0">1</span><span class="br0">]</span> = <span class="kw2">new</span> <span class="kw46">ArrayList</span><span class="sy0">&lt;</span><span class="kw21">Integer</span><span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
&nbsp;
    <span class="co1">// Но если ваши потребности достаточно элементарны. </span>
    <span class="co1">// создать массив параметризованных типов можно, хотя </span>
    <span class="co1">// и с предупреждением о "непроверенном" преобразовании </span>
    <span class="kw166">List</span><span class="sy0">&lt;</span>BerylliumSphere<span class="sy0">&gt;</span><span class="br0">[</span><span class="br0">]</span> spheres =
      <span class="br0">(</span><span class="kw166">List</span><span class="sy0">&lt;</span>BerylliumSphere<span class="sy0">&gt;</span><span class="br0">[</span><span class="br0">]</span><span class="br0">)</span><span class="kw2">new</span> <span class="kw166">List</span><span class="br0">[</span><span class="nu0">10</span><span class="br0">]</span><span class="sy0">;</span>
    <span class="kw1">for</span><span class="br0">(</span><span class="kw3">int</span> i = <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> spheres.<span class="me1">length</span><span class="sy0">;</span> i++<span class="br0">)</span>
      spheres<span class="br0">[</span>i<span class="br0">]</span> = <span class="kw2">new</span> <span class="kw46">ArrayList</span><span class="sy0">&lt;</span>BerylliumSphere<span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<p>Мы видим, что при при получении ссылки на List&lt;String&gt;[] 
выполняется некоторая проверка на стадии компиляции. Проблема в том, что
 массивы ковариантны, поэтому List&lt;String&gt;[] также является 
Object[], поэтому вашему массиву можно присвоить 
ArrayList&lt;Integer&gt; без выдачи ошибок на стадии компиляции или 
выполнения.
Если вы уверены в том, что восходящее преобразование выполняться не 
будет, а ваши потребности относительно просты, можно создать массив 
параметризованных типов, обеспечивающий простейшую проверку типов на 
стадии компиляции. Тем не менее параметризованный контейнер практически 
всегда оказывается более удачным решением, чем массив параметризованных 
типов.
</p>
<h2><span class="mw-headline" id=".D0.A1.D0.BE.D0.B7.D0.B4.D0.B0.D0.BD.D0.B8.D0.B5_.D1.82.D0.B5.D1.81.D1.82.D0.BE.D0.B2.D1.8B.D1.85_.D0.B4.D0.B0.D0.BD.D0.BD.D1.8B.D1.85">Создание тестовых данных</span></h2>
<p>При экспериментах с массивами (и программами вообще) полезно иметь 
возможность простого заполнения массивов тестовыми данными. 
Инструментарий, описанный в этом разделе, заполняет массив объектными 
значениями.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"> <span class="kw46">Arrays</span>.<span class="me1">fill</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span></pre></div></div>
<p>Класс <i><b>Arrays</b></i> из стандартной библиотеки <i>Java</i> содержит весьма тривиальный метод <i><b>fill()</b></i>:
 он всего лишь дублирует одно значение в каждом элементе массива, а в 
случае объектов копирует одну ссылку в каждый элемент. Пример:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"><span class="co1">//: arrays/FillingArrays.java</span>
<span class="co1">// Использование Arrays.fill()</span>
<span class="kw2">import</span> <span class="co2">java.util.*</span><span class="sy0">;</span>
<span class="kw2">import</span> <span class="kw2">static</span> <span class="co2">net.mindview.util.Print.*</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">class</span> FillingArrays <span class="br0">{</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">void</span> main<span class="br0">(</span><span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw3">int</span> size = <span class="nu0">6</span><span class="sy0">;</span>
    <span class="kw3">boolean</span><span class="br0">[</span><span class="br0">]</span> a1 = <span class="kw2">new</span> <span class="kw3">boolean</span><span class="br0">[</span>size<span class="br0">]</span><span class="sy0">;</span>
    <span class="kw3">byte</span><span class="br0">[</span><span class="br0">]</span> a2 = <span class="kw2">new</span> <span class="kw3">byte</span><span class="br0">[</span>size<span class="br0">]</span><span class="sy0">;</span>
    <span class="kw3">char</span><span class="br0">[</span><span class="br0">]</span> a3 = <span class="kw2">new</span> <span class="kw3">char</span><span class="br0">[</span>size<span class="br0">]</span><span class="sy0">;</span>
    <span class="kw3">short</span><span class="br0">[</span><span class="br0">]</span> a4 = <span class="kw2">new</span> <span class="kw3">short</span><span class="br0">[</span>size<span class="br0">]</span><span class="sy0">;</span>
    <span class="kw3">int</span><span class="br0">[</span><span class="br0">]</span> a5 = <span class="kw2">new</span> <span class="kw3">int</span><span class="br0">[</span>size<span class="br0">]</span><span class="sy0">;</span>
    <span class="kw3">long</span><span class="br0">[</span><span class="br0">]</span> a6 = <span class="kw2">new</span> <span class="kw3">long</span><span class="br0">[</span>size<span class="br0">]</span><span class="sy0">;</span>
    <span class="kw3">float</span><span class="br0">[</span><span class="br0">]</span> a7 = <span class="kw2">new</span> <span class="kw3">float</span><span class="br0">[</span>size<span class="br0">]</span><span class="sy0">;</span>
    <span class="kw3">double</span><span class="br0">[</span><span class="br0">]</span> a8 = <span class="kw2">new</span> <span class="kw3">double</span><span class="br0">[</span>size<span class="br0">]</span><span class="sy0">;</span>
    <span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span> a9 = <span class="kw2">new</span> <span class="kw21">String</span><span class="br0">[</span>size<span class="br0">]</span><span class="sy0">;</span>
    <span class="kw46">Arrays</span>.<span class="me1">fill</span><span class="br0">(</span>a1, <span class="kw4">true</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"a1 = "</span> + <span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>a1<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw46">Arrays</span>.<span class="me1">fill</span><span class="br0">(</span>a2, <span class="br0">(</span><span class="kw3">byte</span><span class="br0">)</span><span class="nu0">11</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"a2 = "</span> + <span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>a2<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw46">Arrays</span>.<span class="me1">fill</span><span class="br0">(</span>a3, <span class="st0">'x'</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"a3 = "</span> + <span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>a3<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw46">Arrays</span>.<span class="me1">fill</span><span class="br0">(</span>a4, <span class="br0">(</span><span class="kw3">short</span><span class="br0">)</span><span class="nu0">17</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"a4 = "</span> + <span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>a4<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw46">Arrays</span>.<span class="me1">fill</span><span class="br0">(</span>a5, <span class="nu0">19</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"a5 = "</span> + <span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>a5<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw46">Arrays</span>.<span class="me1">fill</span><span class="br0">(</span>a6, <span class="nu0">23</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"a6 = "</span> + <span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>a6<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw46">Arrays</span>.<span class="me1">fill</span><span class="br0">(</span>a7, <span class="nu0">29</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"a7 = "</span> + <span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>a7<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw46">Arrays</span>.<span class="me1">fill</span><span class="br0">(</span>a8, <span class="nu0">47</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"a8 = "</span> + <span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>a8<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw46">Arrays</span>.<span class="me1">fill</span><span class="br0">(</span>a9, <span class="st0">"Hello"</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"a9 = "</span> + <span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>a9<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="co1">// Интервальные операции:</span>
    <span class="kw46">Arrays</span>.<span class="me1">fill</span><span class="br0">(</span>a9, <span class="nu0">3</span>, <span class="nu0">5</span>, <span class="st0">"World"</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"a9 = "</span> + <span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>a9<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<p>&lt;spoiler text="Output:"&gt;
</p>
<pre>a1 = [true, true, true, true, true, true]
a2 = [11, 11, 11, 11, 11, 11]
a3 = [x, x, x, x, x, x]
a4 = [17, 17, 17, 17, 17, 17]
a5 = [19, 19, 19, 19, 19, 19]
a6 = [23, 23, 23, 23, 23, 23]
a7 = [29.0, 29.0, 29.0, 29.0, 29.0, 29.0]
a8 = [47.0, 47.0, 47.0, 47.0, 47.0, 47.0]
a9 = [Hello, Hello, Hello, Hello, Hello, Hello]
a9 = [Hello, Hello, Hello, World, World, Hello]
</pre>
<p>&lt;/spoiler&gt;
Метод заполняет либо весь массив, либо, как показывают две последние команды, диапазон его элементов. Но, поскольку вызывать <i><b>Arrays.fill()</b></i> можно только для одного значения данных, полученные результаты не слишком полезны.
</p>
<h2><span class="mw-headline" id=".D0.93.D0.B5.D0.BD.D0.B5.D1.80.D0.B0.D1.82.D0.BE.D1.80.D1.8B_.D0.B4.D0.B0.D0.BD.D0.BD.D1.8B.D1.85">Генераторы данных</span></h2>
<p>Чтобы создавать менее тривиальные массивы данных с более гибкими 
возможностями, мы воспользуемся концепцией генераторов, представленной в
 главе 14. Генератор способен выдавать любые данные по вашему выбору 
(напомню, что он является примером паттерна «стратегия» — разные 
генераторы представляют разные стратегии). В этом разделе будут 
представлены некоторые готовые генераторы, но вы также сможете легко 
определить собственный генератор для своих потребностей. Для начала 
рассмотрим простейший набор счетных генераторов для всех примитивных 
типов и <i><b>String</b></i>. Классы генераторов вложены в класс <i><b>CountingGenerator</b></i>, чтобы они могли обозначаться именами генерируемых объектов. Например, генератор, создающий объекты <i><b>Integer</b></i>, будет создаваться выражением <i><b>new CountingGenerator.Integer()</b></i>:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"><span class="co1">//: net/mindview/util/CountingGenerator.java</span>
<span class="co1">// Simple generator implementations.</span>
<span class="kw2">package</span> <span class="co2">net.mindview.util</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">class</span> CountingGenerator <span class="br0">{</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw2">class</span>
  <span class="kw21">Boolean</span> <span class="kw2">implements</span> Generator<span class="sy0">&lt;</span>java.<span class="me1">lang</span>.<span class="kw21">Boolean</span><span class="sy0">&gt;</span> <span class="br0">{</span>
    <span class="kw2">private</span> <span class="kw3">boolean</span> value = <span class="kw4">false</span><span class="sy0">;</span>
    <span class="kw2">public</span> java.<span class="me1">lang</span>.<span class="kw21">Boolean</span> next<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
      value = <span class="sy0">!</span>value<span class="sy0">;</span> <span class="co1">// Поочередное переключение</span>
      <span class="kw2">return</span> value<span class="sy0">;</span>
    <span class="br0">}</span>
  <span class="br0">}</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw2">class</span>
  <span class="kw21">Byte</span> <span class="kw2">implements</span> Generator<span class="sy0">&lt;</span>java.<span class="me1">lang</span>.<span class="kw21">Byte</span><span class="sy0">&gt;</span> <span class="br0">{</span>
    <span class="kw2">private</span> <span class="kw3">byte</span> value = <span class="nu0">0</span><span class="sy0">;</span>
    <span class="kw2">public</span> java.<span class="me1">lang</span>.<span class="kw21">Byte</span> next<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span> <span class="kw2">return</span> value++<span class="sy0">;</span> <span class="br0">}</span>
  <span class="br0">}</span>
  <span class="kw2">static</span> <span class="kw3">char</span><span class="br0">[</span><span class="br0">]</span> chars = <span class="br0">(</span><span class="st0">"abcdefghijklmnopqrstuvwxyz"</span> +
    <span class="st0">"ABCDEFGHIJKLMNOPQRSTUVWXYZ"</span><span class="br0">)</span>.<span class="me1">toCharArray</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw2">class</span>
  <span class="kw21">Character</span> <span class="kw2">implements</span> Generator<span class="sy0">&lt;</span>java.<span class="me1">lang</span>.<span class="kw21">Character</span><span class="sy0">&gt;</span> <span class="br0">{</span>
    <span class="kw3">int</span> index = -<span class="nu0">1</span><span class="sy0">;</span>
    <span class="kw2">public</span> java.<span class="me1">lang</span>.<span class="kw21">Character</span> next<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
      index = <span class="br0">(</span>index + <span class="nu0">1</span><span class="br0">)</span> <span class="sy0">%</span> chars.<span class="me1">length</span><span class="sy0">;</span>
      <span class="kw2">return</span> chars<span class="br0">[</span>index<span class="br0">]</span><span class="sy0">;</span>
    <span class="br0">}</span>
  <span class="br0">}</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw2">class</span>
  <span class="kw21">String</span> <span class="kw2">implements</span> Generator<span class="sy0">&lt;</span>java.<span class="me1">lang</span>.<span class="kw21">String</span><span class="sy0">&gt;</span> <span class="br0">{</span>
    <span class="kw2">private</span> <span class="kw3">int</span> length = <span class="nu0">7</span><span class="sy0">;</span>
    Generator<span class="sy0">&lt;</span>java.<span class="me1">lang</span>.<span class="kw21">Character</span><span class="sy0">&gt;</span> cg = <span class="kw2">new</span> <span class="kw21">Character</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw2">public</span> <span class="kw21">String</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="br0">}</span>
    <span class="kw2">public</span> <span class="kw21">String</span><span class="br0">(</span><span class="kw3">int</span> length<span class="br0">)</span> <span class="br0">{</span> <span class="kw2">this</span>.<span class="me1">length</span> = length<span class="sy0">;</span> <span class="br0">}</span>
    <span class="kw2">public</span> java.<span class="me1">lang</span>.<span class="kw21">String</span> next<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
      <span class="kw3">char</span><span class="br0">[</span><span class="br0">]</span> buf = <span class="kw2">new</span> <span class="kw3">char</span><span class="br0">[</span>length<span class="br0">]</span><span class="sy0">;</span>
      <span class="kw1">for</span><span class="br0">(</span><span class="kw3">int</span> i = <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> length<span class="sy0">;</span> i++<span class="br0">)</span>
        buf<span class="br0">[</span>i<span class="br0">]</span> = cg.<span class="me1">next</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
      <span class="kw2">return</span> <span class="kw2">new</span> java.<span class="me1">lang</span>.<span class="kw21">String</span><span class="br0">(</span>buf<span class="br0">)</span><span class="sy0">;</span>
    <span class="br0">}</span>
  <span class="br0">}</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw2">class</span>
  <span class="kw21">Short</span> <span class="kw2">implements</span> Generator<span class="sy0">&lt;</span>java.<span class="me1">lang</span>.<span class="kw21">Short</span><span class="sy0">&gt;</span> <span class="br0">{</span>
    <span class="kw2">private</span> <span class="kw3">short</span> value = <span class="nu0">0</span><span class="sy0">;</span>
    <span class="kw2">public</span> java.<span class="me1">lang</span>.<span class="kw21">Short</span> next<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span> <span class="kw2">return</span> value++<span class="sy0">;</span> <span class="br0">}</span>
  <span class="br0">}</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw2">class</span>
  <span class="kw21">Integer</span> <span class="kw2">implements</span> Generator<span class="sy0">&lt;</span>java.<span class="me1">lang</span>.<span class="kw21">Integer</span><span class="sy0">&gt;</span> <span class="br0">{</span>
    <span class="kw2">private</span> <span class="kw3">int</span> value = <span class="nu0">0</span><span class="sy0">;</span>
    <span class="kw2">public</span> java.<span class="me1">lang</span>.<span class="kw21">Integer</span> next<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span> <span class="kw2">return</span> value++<span class="sy0">;</span> <span class="br0">}</span>
  <span class="br0">}</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw2">class</span>
  <span class="kw21">Long</span> <span class="kw2">implements</span> Generator<span class="sy0">&lt;</span>java.<span class="me1">lang</span>.<span class="kw21">Long</span><span class="sy0">&gt;</span> <span class="br0">{</span>
    <span class="kw2">private</span> <span class="kw3">long</span> value = <span class="nu0">0</span><span class="sy0">;</span>
    <span class="kw2">public</span> java.<span class="me1">lang</span>.<span class="kw21">Long</span> next<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span> <span class="kw2">return</span> value++<span class="sy0">;</span> <span class="br0">}</span>
  <span class="br0">}</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw2">class</span>
  <span class="kw21">Float</span> <span class="kw2">implements</span> Generator<span class="sy0">&lt;</span>java.<span class="me1">lang</span>.<span class="kw21">Float</span><span class="sy0">&gt;</span> <span class="br0">{</span>
    <span class="kw2">private</span> <span class="kw3">float</span> value = <span class="nu0">0</span><span class="sy0">;</span>
    <span class="kw2">public</span> java.<span class="me1">lang</span>.<span class="kw21">Float</span> next<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
      <span class="kw3">float</span> result = value<span class="sy0">;</span>
      value += <span class="nu0">1.0</span><span class="sy0">;</span>
      <span class="kw2">return</span> result<span class="sy0">;</span>
    <span class="br0">}</span>
  <span class="br0">}</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw2">class</span>
  <span class="kw21">Double</span> <span class="kw2">implements</span> Generator<span class="sy0">&lt;</span>java.<span class="me1">lang</span>.<span class="kw21">Double</span><span class="sy0">&gt;</span> <span class="br0">{</span>
    <span class="kw2">private</span> <span class="kw3">double</span> value = <span class="nu0">0.0</span><span class="sy0">;</span>
    <span class="kw2">public</span> java.<span class="me1">lang</span>.<span class="kw21">Double</span> next<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
      <span class="kw3">double</span> result = value<span class="sy0">;</span>
      value += <span class="nu0">1.0</span><span class="sy0">;</span>
      <span class="kw2">return</span> result<span class="sy0">;</span>
    <span class="br0">}</span>
  <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<p>Каждый класс реализует некоторое понятие «счетности». В случае <i><b>CountingGenerator.Character</b></i> это повторение символов верхнего и нижнего регистра. Класс <i><b>CountingGenerator.String</b></i> использует <i><b>CountingGenerator.Character</b></i> для заполнения массива символов, который затем преобразуется в <i><b>String</b></i>. Размер массива определяется аргументом конструктора. Обратите внимание на то, что <i><b>CountingGenerator.String</b></i> использует базовую конструкцию <i><b>Generator&lt;java.lang.Character&gt;</b></i> вместо конкретной ссылки на <i><b>CountingGenerator.Character.</b></i>
</p><p>Следующая тестовая программа использует рефлексию с идиомой 
вложенных генераторов, что позволяет применять ее для любого набора 
генераторов, построенного по указанному образцу:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"><span class="co1">//: arrays/GeneratorsTest.java</span>
<span class="kw2">import</span> <span class="co2">net.mindview.util.*</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">class</span> GeneratorsTest <span class="br0">{</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">int</span> size = <span class="nu0">10</span><span class="sy0">;</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">void</span> test<span class="br0">(</span><span class="kw21">Class</span><span class="sy0">&lt;?&gt;</span> surroundingClass<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw1">for</span><span class="br0">(</span><span class="kw21">Class</span><span class="sy0">&lt;?&gt;</span> type&nbsp;: surroundingClass.<span class="me1">getClasses</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span> <span class="br0">{</span>
      <span class="kw21">System</span>.<span class="me1">out</span>.<span class="me1">print</span><span class="br0">(</span>type.<span class="me1">getSimpleName</span><span class="br0">(</span><span class="br0">)</span> + <span class="st0">": "</span><span class="br0">)</span><span class="sy0">;</span>
      <span class="kw2">try</span> <span class="br0">{</span>
        Generator<span class="sy0">&lt;?&gt;</span> g = <span class="br0">(</span>Generator<span class="sy0">&lt;?&gt;</span><span class="br0">)</span>type.<span class="me1">newInstance</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
        <span class="kw1">for</span><span class="br0">(</span><span class="kw3">int</span> i = <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> size<span class="sy0">;</span> i++<span class="br0">)</span>
          <span class="kw21">System</span>.<span class="me1">out</span>.<span class="me1">printf</span><span class="br0">(</span>g.<span class="me1">next</span><span class="br0">(</span><span class="br0">)</span> + <span class="st0">" "</span><span class="br0">)</span><span class="sy0">;</span>
        <span class="kw21">System</span>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
      <span class="br0">}</span> <span class="kw2">catch</span><span class="br0">(</span><span class="kw21">Exception</span> e<span class="br0">)</span> <span class="br0">{</span>
        <span class="kw2">throw</span> <span class="kw2">new</span> <span class="kw21">RuntimeException</span><span class="br0">(</span>e<span class="br0">)</span><span class="sy0">;</span>
      <span class="br0">}</span>
    <span class="br0">}</span>
  <span class="br0">}</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">void</span> main<span class="br0">(</span><span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
    test<span class="br0">(</span>CountingGenerator.<span class="kw2">class</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<p>&lt;spoiler text="Output:"&gt;
</p>
<pre>Double: 0.0 1.0 2.0 3.0 4.0 5.0 6.0 7.0 8.0 9.0
Float: 0.0 1.0 2.0 3.0 4.0 5.0 6.0 7.0 8.0 9.0
Long: 0 1 2 3 4 5 6 7 8 9
Integer: 0 1 2 3 4 5 6 7 8 9
Short: 0 1 2 3 4 5 6 7 8 9
String: abcdefg hijklmn opqrstu vwxyzAB CDEFGHI JKLMNOP QRSTUVW XYZabcd efghijk lmnopqr
Character: a b c d e f g h i j
Byte: 0 1 2 3 4 5 6 7 8 9
Boolean: true false true false true false true false true false
</pre>
<p>&lt;/spoiler&gt;
Предполагается, что тестируемый класс содержит серию вложенных объектов <i><b>Generator</b></i>, каждый из которых имеет конструктор по умолчанию (то есть без аргументов). Рефлексионный метод <i><b>getClasses()</b></i> выдает информацию обо всех вложенных классах. Далее метод <i><b>test()</b></i> создает экземпляр каждого генератора и выводит результаты, полученные при десятикратном вызове <i><b>next()</b></i>. Следующий набор генераторов основан на случайных числах. Так как конструктор <i><b>Random</b></i> инициализируется константой, результаты будут повторяться при каждом запуске программы:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"><span class="co1">//: net/mindview/util/RandomGenerator.java</span>
<span class="co1">// Генераторы, выдающие случайные значения.</span>
<span class="kw2">package</span> <span class="co2">net.mindview.util</span><span class="sy0">;</span>
<span class="kw2">import</span> <span class="co2">java.util.*</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">class</span> RandomGenerator <span class="br0">{</span>
  <span class="kw2">private</span> <span class="kw2">static</span> <span class="kw46">Random</span> r = <span class="kw2">new</span> <span class="kw46">Random</span><span class="br0">(</span><span class="nu0">47</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw2">class</span>
  <span class="kw21">Boolean</span> <span class="kw2">implements</span> Generator<span class="sy0">&lt;</span>java.<span class="me1">lang</span>.<span class="kw21">Boolean</span><span class="sy0">&gt;</span> <span class="br0">{</span>
    <span class="kw2">public</span> java.<span class="me1">lang</span>.<span class="kw21">Boolean</span> next<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
      <span class="kw2">return</span> r.<span class="me1">nextBoolean</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="br0">}</span>
  <span class="br0">}</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw2">class</span>
  <span class="kw21">Byte</span> <span class="kw2">implements</span> Generator<span class="sy0">&lt;</span>java.<span class="me1">lang</span>.<span class="kw21">Byte</span><span class="sy0">&gt;</span> <span class="br0">{</span>
    <span class="kw2">public</span> java.<span class="me1">lang</span>.<span class="kw21">Byte</span> next<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
      <span class="kw2">return</span> <span class="br0">(</span><span class="kw3">byte</span><span class="br0">)</span>r.<span class="me1">nextInt</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="br0">}</span>
  <span class="br0">}</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw2">class</span>
  <span class="kw21">Character</span> <span class="kw2">implements</span> Generator<span class="sy0">&lt;</span>java.<span class="me1">lang</span>.<span class="kw21">Character</span><span class="sy0">&gt;</span> <span class="br0">{</span>
    <span class="kw2">public</span> java.<span class="me1">lang</span>.<span class="kw21">Character</span> next<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
      <span class="kw2">return</span> CountingGenerator.<span class="me1">chars</span><span class="br0">[</span>
        r.<span class="me1">nextInt</span><span class="br0">(</span>CountingGenerator.<span class="me1">chars</span>.<span class="me1">length</span><span class="br0">)</span><span class="br0">]</span><span class="sy0">;</span>
    <span class="br0">}</span>
  <span class="br0">}</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw2">class</span>
  <span class="kw21">String</span> <span class="kw2">extends</span> CountingGenerator.<span class="kw21">String</span> <span class="br0">{</span>
    / Подключение случайного генератора:
    <span class="br0">{</span> cg = <span class="kw2">new</span> <span class="kw21">Character</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span> <span class="br0">}</span> <span class="co1">// Инициализатор</span>
    <span class="kw2">public</span> <span class="kw21">String</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="br0">}</span>
    <span class="kw2">public</span> <span class="kw21">String</span><span class="br0">(</span><span class="kw3">int</span> length<span class="br0">)</span> <span class="br0">{</span> <span class="kw2">super</span><span class="br0">(</span>length<span class="br0">)</span><span class="sy0">;</span> <span class="br0">}</span>
  <span class="br0">}</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw2">class</span>
  <span class="kw21">Short</span> <span class="kw2">implements</span> Generator<span class="sy0">&lt;</span>java.<span class="me1">lang</span>.<span class="kw21">Short</span><span class="sy0">&gt;</span> <span class="br0">{</span>
    <span class="kw2">public</span> java.<span class="me1">lang</span>.<span class="kw21">Short</span> next<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
      <span class="kw2">return</span> <span class="br0">(</span><span class="kw3">short</span><span class="br0">)</span>r.<span class="me1">nextInt</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="br0">}</span>
  <span class="br0">}</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw2">class</span>
  <span class="kw21">Integer</span> <span class="kw2">implements</span> Generator<span class="sy0">&lt;</span>java.<span class="me1">lang</span>.<span class="kw21">Integer</span><span class="sy0">&gt;</span> <span class="br0">{</span>
    <span class="kw2">private</span> <span class="kw3">int</span> mod = <span class="nu0">10000</span><span class="sy0">;</span>
    <span class="kw2">public</span> <span class="kw21">Integer</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="br0">}</span>
    <span class="kw2">public</span> <span class="kw21">Integer</span><span class="br0">(</span><span class="kw3">int</span> modulo<span class="br0">)</span> <span class="br0">{</span> mod = modulo<span class="sy0">;</span> <span class="br0">}</span>
    <span class="kw2">public</span> java.<span class="me1">lang</span>.<span class="kw21">Integer</span> next<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
      <span class="kw2">return</span> r.<span class="me1">nextInt</span><span class="br0">(</span>mod<span class="br0">)</span><span class="sy0">;</span>
    <span class="br0">}</span>
  <span class="br0">}</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw2">class</span>
  <span class="kw21">Long</span> <span class="kw2">implements</span> Generator<span class="sy0">&lt;</span>java.<span class="me1">lang</span>.<span class="kw21">Long</span><span class="sy0">&gt;</span> <span class="br0">{</span>
    <span class="kw2">private</span> <span class="kw3">int</span> mod = <span class="nu0">10000</span><span class="sy0">;</span>
    <span class="kw2">public</span> <span class="kw21">Long</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="br0">}</span>
    <span class="kw2">public</span> <span class="kw21">Long</span><span class="br0">(</span><span class="kw3">int</span> modulo<span class="br0">)</span> <span class="br0">{</span> mod = modulo<span class="sy0">;</span> <span class="br0">}</span>
    <span class="kw2">public</span> java.<span class="me1">lang</span>.<span class="kw21">Long</span> next<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
      <span class="kw2">return</span> <span class="kw2">new</span> java.<span class="me1">lang</span>.<span class="kw21">Long</span><span class="br0">(</span>r.<span class="me1">nextInt</span><span class="br0">(</span>mod<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="br0">}</span>
  <span class="br0">}</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw2">class</span>
  <span class="kw21">Float</span> <span class="kw2">implements</span> Generator<span class="sy0">&lt;</span>java.<span class="me1">lang</span>.<span class="kw21">Float</span><span class="sy0">&gt;</span> <span class="br0">{</span>
    <span class="kw2">public</span> java.<span class="me1">lang</span>.<span class="kw21">Float</span> next<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
      <span class="co1">// Отсечение до двух разрядов в дробной части:</span>
      <span class="kw3">int</span> trimmed = <span class="kw21">Math</span>.<span class="me1">round</span><span class="br0">(</span>r.<span class="me1">nextFloat</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">*</span> <span class="nu0">100</span><span class="br0">)</span><span class="sy0">;</span>
      <span class="kw2">return</span> <span class="br0">(</span><span class="br0">(</span><span class="kw3">float</span><span class="br0">)</span>trimmed<span class="br0">)</span> / <span class="nu0">100</span><span class="sy0">;</span>
    <span class="br0">}</span>
  <span class="br0">}</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw2">class</span>
  <span class="kw21">Double</span> <span class="kw2">implements</span> Generator<span class="sy0">&lt;</span>java.<span class="me1">lang</span>.<span class="kw21">Double</span><span class="sy0">&gt;</span> <span class="br0">{</span>
    <span class="kw2">public</span> java.<span class="me1">lang</span>.<span class="kw21">Double</span> next<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
      <span class="kw3">long</span> trimmed = <span class="kw21">Math</span>.<span class="me1">round</span><span class="br0">(</span>r.<span class="me1">nextDouble</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">*</span> <span class="nu0">100</span><span class="br0">)</span><span class="sy0">;</span>
      <span class="kw2">return</span> <span class="br0">(</span><span class="br0">(</span><span class="kw3">double</span><span class="br0">)</span>trimmed<span class="br0">)</span> / <span class="nu0">100</span><span class="sy0">;</span>
    <span class="br0">}</span>
  <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<p>Как видите, <i><b>RandomGenerator.String</b></i> наследует от <i><b>CountingGenerator.String</b></i>, просто подключая новый генератор <i><b>Character</b></i>.
Чтобы генерируемые числа были не слишком велики, <i><b>RandomGenerator.Integer</b></i>
 по умолчанию берет остаток от деления на 10 000, но перегруженный 
конструктор позволяет выбрать меньшее значение. Аналогичный подход 
используется и для <i><b>RandomGenerator.Long</b></i>. Для генераторов <i><b>Float</b></i> и <i><b>Double</b></i> цифры в дробной части усекаются.
Для тестирования <i><b>RandomGenerator</b></i> можно воспользоваться уже готовым классом <i><b>GeneratorsTest</b></i>:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"><span class="co1">//: arrays/RandomGeneratorsTest.java</span>
<span class="kw2">import</span> <span class="co2">net.mindview.util.*</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">class</span> RandomGeneratorsTest <span class="br0">{</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">void</span> main<span class="br0">(</span><span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
    GeneratorsTest.<span class="me1">test</span><span class="br0">(</span>RandomGenerator.<span class="kw2">class</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<p>&lt;spoiler text="Output:"&gt;
</p>
<pre>Double: 0.73 0.53 0.16 0.19 0.52 0.27 0.26 0.05 0.8 0.76
Float: 0.53 0.16 0.53 0.4 0.49 0.25 0.8 0.11 0.02 0.8
Long: 7674 8804 8950 7826 4322 896 8033 2984 2344 5810
Integer: 8303 3141 7138 6012 9966 8689 7185 6992 5746 3976
Short: 3358 20592 284 26791 12834 -8092 13656 29324 -1423 5327
String: bkInaMe sbtWHkj UrUkZPg wsqPzDy CyRFJQA HxxHvHq XumcXZJ oogoYWM NvqeuTp nXsgqia
Character: x x E A J J m z M s
Byte: -60 -17 55 -14 -5 115 39 -37 79 115
Boolean: false true false false true true true true true true
</pre>
<p>&lt;/spoiler&gt;
Чтобы изменить количество генерируемых значений, воспользуйтесь <i><b>public</b></i>-полем <i><b>GeneratorsTest.size</b></i>.
</p>
<h2><span class="mw-headline" id=".D0.A1.D0.BE.D0.B7.D0.B4.D0.B0.D0.BD.D0.B8.D0.B5_.D0.BC.D0.B0.D1.81.D1.81.D0.B8.D0.B2.D0.BE.D0.B2_.D1.81_.D0.B8.D1.81.D0.BF.D0.BE.D0.BB.D1.8C.D0.B7.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5.D0.BC_.D0.B3.D0.B5.D0.BD.D0.B5.D1.80.D0.B0.D1.82.D0.BE.D1.80.D0.BE.D0.B2">Создание массивов с использованием генераторов</span></h2>
<p>Для создания массивов на основе <i><b>Generator</b></i> нам потребуются два вспомогательных класса. Первый использует произвольный <i><b>Generator</b></i> для получения массива типов, производных от <i><b>Object</b></i>.
 Для решения проблемы с примитивами второй класс получает произвольный 
массив с объектами-«обертками» и строит для него соответствующий массив 
примитивов.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"><span class="kw2">public</span> <span class="kw2">static</span> <span class="kw2">class</span> <span class="kw21">Double</span> <span class="kw2">implements</span> Generator<span class="sy0">&lt;</span>java.<span class="me1">lang</span>.<span class="kw21">Double</span><span class="sy0">&gt;</span> <span class="br0">{</span> 
     <span class="kw2">public</span> java.<span class="me1">lang</span>.<span class="kw21">Double</span> next<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
                  <span class="kw3">long</span> trimmed = <span class="kw21">Math</span>.<span class="me1">round</span><span class="br0">(</span>r.<span class="me1">nextDouble</span><span class="br0">(</span><span class="br0">)</span> <span class="sy0">*</span> <span class="nu0">100</span><span class="br0">)</span><span class="sy0">;</span> 
                  <span class="kw2">return</span> <span class="br0">(</span><span class="br0">(</span><span class="kw3">double</span><span class="br0">)</span>trimmed<span class="br0">)</span> / <span class="nu0">100</span><span class="sy0">;</span>
     <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<p>Первый вспомогательный класс может работать в двух режимах, представленных перегруженным статическим методом <i><b>аrrау()</b></i>. Первая версия метода получает существующий массив и заполняет его с использованием <i><b>Generator</b></i>; вторая версия получает объект <i><b>Class.Generator</b></i> и количество элементов и создает новый массив, который также заполняется с использованием <i><b>Generator</b></i>. Помните, что при этом создаются только массивы субтипов <i><b>Object</b></i>, но не массивы при­митивных типов:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"><span class="co1">//: net/mindview/util/Generated.java</span>
<span class="kw2">package</span> <span class="co2">net.mindview.util</span><span class="sy0">;</span>
<span class="kw2">import</span> <span class="co2">java.util.*</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">class</span> Generated <span class="br0">{</span>
  <span class="co1">// Заполнение существующего массиваy:</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="sy0">&lt;</span>T<span class="sy0">&gt;</span> T<span class="br0">[</span><span class="br0">]</span> array<span class="br0">(</span>T<span class="br0">[</span><span class="br0">]</span> a, Generator<span class="sy0">&lt;</span>T<span class="sy0">&gt;</span> gen<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw2">return</span> <span class="kw2">new</span> CollectionData<span class="sy0">&lt;</span>T<span class="sy0">&gt;</span><span class="br0">(</span>gen, a.<span class="me1">length</span><span class="br0">)</span>.<span class="me1">toArray</span><span class="br0">(</span>a<span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>
  <span class="co1">// Создание нового массива:</span>
  @<span class="kw21">SuppressWarnings</span><span class="br0">(</span><span class="st0">"unchecked"</span><span class="br0">)</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="sy0">&lt;</span>T<span class="sy0">&gt;</span> T<span class="br0">[</span><span class="br0">]</span> array<span class="br0">(</span><span class="kw21">Class</span><span class="sy0">&lt;</span>T<span class="sy0">&gt;</span> type,
      Generator<span class="sy0">&lt;</span>T<span class="sy0">&gt;</span> gen, <span class="kw3">int</span> size<span class="br0">)</span> <span class="br0">{</span>
    T<span class="br0">[</span><span class="br0">]</span> a =
      <span class="br0">(</span>T<span class="br0">[</span><span class="br0">]</span><span class="br0">)</span>java.<span class="me1">lang</span>.<span class="me1">reflect</span>.<span class="kw166">Array</span>.<span class="me1">newInstance</span><span class="br0">(</span>type, size<span class="br0">)</span><span class="sy0">;</span>
    <span class="kw2">return</span> <span class="kw2">new</span> CollectionData<span class="sy0">&lt;</span>T<span class="sy0">&gt;</span><span class="br0">(</span>gen, size<span class="br0">)</span>.<span class="me1">toArray</span><span class="br0">(</span>a<span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<p>Класс <i><b>CollectionData</b></i> создает объект <i><b>Collection</b></i>, заполненный элементами, которые были созданы генератором <i><b>gen</b></i>. Количество элементов определяется вторым аргументом конструктора. Все субтипы <i><b>Collection</b></i> содержат метод <i><b>toArray()</b></i>, заполняющий массив-аргумент элементами из <i><b>Collection</b></i>.
 Второй метод использует рефлексию для динамического создания нового 
массива соответствующего типа и размера. Затем созданный массив 
заполняется таким же способом, как в первом методе. Чтобы протестировать
 <i><b>Generated</b></i>, мы воспользуемся одним из классов <i><b>CountingGenerator</b></i>, описанных в предыдущем разделе:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"><span class="co1">//: arrays/TestGenerated.java</span>
<span class="kw2">import</span> <span class="co2">java.util.*</span><span class="sy0">;</span>
<span class="kw2">import</span> <span class="co2">net.mindview.util.*</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">class</span> TestGenerated <span class="br0">{</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">void</span> main<span class="br0">(</span><span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw21">Integer</span><span class="br0">[</span><span class="br0">]</span> a = <span class="br0">{</span> <span class="nu0">9</span>, <span class="nu0">8</span>, <span class="nu0">7</span>, <span class="nu0">6</span> <span class="br0">}</span><span class="sy0">;</span>
    <span class="kw21">System</span>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">(</span><span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>a<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    a = Generated.<span class="me1">array</span><span class="br0">(</span>a,<span class="kw2">new</span> CountingGenerator.<span class="kw21">Integer</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw21">System</span>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">(</span><span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>a<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw21">Integer</span><span class="br0">[</span><span class="br0">]</span> b = Generated.<span class="me1">array</span><span class="br0">(</span><span class="kw21">Integer</span>.<span class="kw2">class</span>,
        <span class="kw2">new</span> CountingGenerator.<span class="kw21">Integer</span><span class="br0">(</span><span class="br0">)</span>, <span class="nu0">15</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw21">System</span>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">(</span><span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>b<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<p>&lt;spoiler text="Output:"&gt;
</p>
<pre>[9, 8, 7, 6]
[0, 1, 2, 3]
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]
</pre>
<p>&lt;/spoiler&gt;
Хотя массив а инициализируется, эти данные перезаписываются при вызове <i><b>Generated.array()</b></i>. Инициализация <i><b>b</b></i>
 показывает, как создать заполненный массив «с нуля».
Параметризация не работает с примитивами, поэтому для заполнения 
примитивных массивов будут использоваться генераторы. Для решения этой 
проблемы мы создадим преобразователь, который получает произвольный 
массив объектных «оберток» и преобразует его в массив соответствующих 
примитивных типов. Без него нам пришлось бы создавать специализированные
 генераторы для всех примитивов.
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"><span class="co1">//: net/mindview/util/ConvertTo.java</span>
<span class="kw2">package</span> <span class="co2">net.mindview.util</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">class</span> ConvertTo <span class="br0">{</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">boolean</span><span class="br0">[</span><span class="br0">]</span> primitive<span class="br0">(</span><span class="kw21">Boolean</span><span class="br0">[</span><span class="br0">]</span> in<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw3">boolean</span><span class="br0">[</span><span class="br0">]</span> result = <span class="kw2">new</span> <span class="kw3">boolean</span><span class="br0">[</span>in.<span class="me1">length</span><span class="br0">]</span><span class="sy0">;</span>
    <span class="kw1">for</span><span class="br0">(</span><span class="kw3">int</span> i = <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> in.<span class="me1">length</span><span class="sy0">;</span> i++<span class="br0">)</span>
      result<span class="br0">[</span>i<span class="br0">]</span> = in<span class="br0">[</span>i<span class="br0">]</span><span class="sy0">;</span> <span class="co1">// Autounboxing</span>
    <span class="kw2">return</span> result<span class="sy0">;</span>
  <span class="br0">}</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">char</span><span class="br0">[</span><span class="br0">]</span> primitive<span class="br0">(</span><span class="kw21">Character</span><span class="br0">[</span><span class="br0">]</span> in<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw3">char</span><span class="br0">[</span><span class="br0">]</span> result = <span class="kw2">new</span> <span class="kw3">char</span><span class="br0">[</span>in.<span class="me1">length</span><span class="br0">]</span><span class="sy0">;</span>
    <span class="kw1">for</span><span class="br0">(</span><span class="kw3">int</span> i = <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> in.<span class="me1">length</span><span class="sy0">;</span> i++<span class="br0">)</span>
      result<span class="br0">[</span>i<span class="br0">]</span> = in<span class="br0">[</span>i<span class="br0">]</span><span class="sy0">;</span>
    <span class="kw2">return</span> result<span class="sy0">;</span>
  <span class="br0">}</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">byte</span><span class="br0">[</span><span class="br0">]</span> primitive<span class="br0">(</span><span class="kw21">Byte</span><span class="br0">[</span><span class="br0">]</span> in<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw3">byte</span><span class="br0">[</span><span class="br0">]</span> result = <span class="kw2">new</span> <span class="kw3">byte</span><span class="br0">[</span>in.<span class="me1">length</span><span class="br0">]</span><span class="sy0">;</span>
    <span class="kw1">for</span><span class="br0">(</span><span class="kw3">int</span> i = <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> in.<span class="me1">length</span><span class="sy0">;</span> i++<span class="br0">)</span>
      result<span class="br0">[</span>i<span class="br0">]</span> = in<span class="br0">[</span>i<span class="br0">]</span><span class="sy0">;</span>
    <span class="kw2">return</span> result<span class="sy0">;</span>
  <span class="br0">}</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">short</span><span class="br0">[</span><span class="br0">]</span> primitive<span class="br0">(</span><span class="kw21">Short</span><span class="br0">[</span><span class="br0">]</span> in<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw3">short</span><span class="br0">[</span><span class="br0">]</span> result = <span class="kw2">new</span> <span class="kw3">short</span><span class="br0">[</span>in.<span class="me1">length</span><span class="br0">]</span><span class="sy0">;</span>
    <span class="kw1">for</span><span class="br0">(</span><span class="kw3">int</span> i = <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> in.<span class="me1">length</span><span class="sy0">;</span> i++<span class="br0">)</span>
      result<span class="br0">[</span>i<span class="br0">]</span> = in<span class="br0">[</span>i<span class="br0">]</span><span class="sy0">;</span>
    <span class="kw2">return</span> result<span class="sy0">;</span>
  <span class="br0">}</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">int</span><span class="br0">[</span><span class="br0">]</span> primitive<span class="br0">(</span><span class="kw21">Integer</span><span class="br0">[</span><span class="br0">]</span> in<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw3">int</span><span class="br0">[</span><span class="br0">]</span> result = <span class="kw2">new</span> <span class="kw3">int</span><span class="br0">[</span>in.<span class="me1">length</span><span class="br0">]</span><span class="sy0">;</span>
    <span class="kw1">for</span><span class="br0">(</span><span class="kw3">int</span> i = <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> in.<span class="me1">length</span><span class="sy0">;</span> i++<span class="br0">)</span>
      result<span class="br0">[</span>i<span class="br0">]</span> = in<span class="br0">[</span>i<span class="br0">]</span><span class="sy0">;</span>
    <span class="kw2">return</span> result<span class="sy0">;</span>
  <span class="br0">}</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">long</span><span class="br0">[</span><span class="br0">]</span> primitive<span class="br0">(</span><span class="kw21">Long</span><span class="br0">[</span><span class="br0">]</span> in<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw3">long</span><span class="br0">[</span><span class="br0">]</span> result = <span class="kw2">new</span> <span class="kw3">long</span><span class="br0">[</span>in.<span class="me1">length</span><span class="br0">]</span><span class="sy0">;</span>
    <span class="kw1">for</span><span class="br0">(</span><span class="kw3">int</span> i = <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> in.<span class="me1">length</span><span class="sy0">;</span> i++<span class="br0">)</span>
      result<span class="br0">[</span>i<span class="br0">]</span> = in<span class="br0">[</span>i<span class="br0">]</span><span class="sy0">;</span>
    <span class="kw2">return</span> result<span class="sy0">;</span>
  <span class="br0">}</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">float</span><span class="br0">[</span><span class="br0">]</span> primitive<span class="br0">(</span><span class="kw21">Float</span><span class="br0">[</span><span class="br0">]</span> in<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw3">float</span><span class="br0">[</span><span class="br0">]</span> result = <span class="kw2">new</span> <span class="kw3">float</span><span class="br0">[</span>in.<span class="me1">length</span><span class="br0">]</span><span class="sy0">;</span>
    <span class="kw1">for</span><span class="br0">(</span><span class="kw3">int</span> i = <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> in.<span class="me1">length</span><span class="sy0">;</span> i++<span class="br0">)</span>
      result<span class="br0">[</span>i<span class="br0">]</span> = in<span class="br0">[</span>i<span class="br0">]</span><span class="sy0">;</span>
    <span class="kw2">return</span> result<span class="sy0">;</span>
  <span class="br0">}</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">double</span><span class="br0">[</span><span class="br0">]</span> primitive<span class="br0">(</span><span class="kw21">Double</span><span class="br0">[</span><span class="br0">]</span> in<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw3">double</span><span class="br0">[</span><span class="br0">]</span> result = <span class="kw2">new</span> <span class="kw3">double</span><span class="br0">[</span>in.<span class="me1">length</span><span class="br0">]</span><span class="sy0">;</span>
    <span class="kw1">for</span><span class="br0">(</span><span class="kw3">int</span> i = <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> in.<span class="me1">length</span><span class="sy0">;</span> i++<span class="br0">)</span>
      result<span class="br0">[</span>i<span class="br0">]</span> = in<span class="br0">[</span>i<span class="br0">]</span><span class="sy0">;</span>
    <span class="kw2">return</span> result<span class="sy0">;</span>
  <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<p>Каждая версия <i><b>primitive()</b></i> создает примитивный массив правильной длины, а затем копирует элементы из массива <i><b>in</b></i>. Обратите внимание на выполнение автоматической распаковки в выражении
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1">  result<span class="br0">[</span>i<span class="br0">]</span> = in<span class="br0">[</span>i<span class="br0">]</span><span class="sy0">;</span></pre></div></div>
<p>Пример использования ConvertTo с обеими версиями Generated.array():
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"><span class="co1">//: arrays/PrimitiveConversionDemonstration.java</span>
<span class="kw2">import</span> <span class="co2">java.util.*</span><span class="sy0">;</span>
<span class="kw2">import</span> <span class="co2">net.mindview.util.*</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">class</span> PrimitiveConversionDemonstration <span class="br0">{</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">void</span> main<span class="br0">(</span><span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw21">Integer</span><span class="br0">[</span><span class="br0">]</span> a = Generated.<span class="me1">array</span><span class="br0">(</span><span class="kw21">Integer</span>.<span class="kw2">class</span>,
        <span class="kw2">new</span> CountingGenerator.<span class="kw21">Integer</span><span class="br0">(</span><span class="br0">)</span>, <span class="nu0">15</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw3">int</span><span class="br0">[</span><span class="br0">]</span> b = ConvertTo.<span class="me1">primitive</span><span class="br0">(</span>a<span class="br0">)</span><span class="sy0">;</span>
    <span class="kw21">System</span>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">(</span><span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>b<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw3">boolean</span><span class="br0">[</span><span class="br0">]</span> c = ConvertTo.<span class="me1">primitive</span><span class="br0">(</span>
      Generated.<span class="me1">array</span><span class="br0">(</span><span class="kw21">Boolean</span>.<span class="kw2">class</span>,
        <span class="kw2">new</span> CountingGenerator.<span class="kw21">Boolean</span><span class="br0">(</span><span class="br0">)</span>, <span class="nu0">7</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw21">System</span>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">(</span><span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>c<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<p>&lt;spoiler text="Output:"&gt;
</p>
<pre>[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]
[true, false, true, false, true, false, true]
</pre>
<p>&lt;/spoiler&gt;
Наконец, следующая программа тестирует инструментарий создания массивов с классами <i><b>RandomGenerator</b></i>:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"><span class="co1">//: arrays/TestArrayGeneration.java</span>
<span class="co1">// Test the tools that use generators to fill arrays.</span>
<span class="kw2">import</span> <span class="co2">java.util.*</span><span class="sy0">;</span>
<span class="kw2">import</span> <span class="co2">net.mindview.util.*</span><span class="sy0">;</span>
<span class="kw2">import</span> <span class="kw2">static</span> <span class="co2">net.mindview.util.Print.*</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">class</span> TestArrayGeneration <span class="br0">{</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">void</span> main<span class="br0">(</span><span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw3">int</span> size = <span class="nu0">6</span><span class="sy0">;</span>
    <span class="kw3">boolean</span><span class="br0">[</span><span class="br0">]</span> a1 = ConvertTo.<span class="me1">primitive</span><span class="br0">(</span>Generated.<span class="me1">array</span><span class="br0">(</span>
      <span class="kw21">Boolean</span>.<span class="kw2">class</span>, <span class="kw2">new</span> RandomGenerator.<span class="kw21">Boolean</span><span class="br0">(</span><span class="br0">)</span>, size<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"a1 = "</span> + <span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>a1<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw3">byte</span><span class="br0">[</span><span class="br0">]</span> a2 = ConvertTo.<span class="me1">primitive</span><span class="br0">(</span>Generated.<span class="me1">array</span><span class="br0">(</span>
      <span class="kw21">Byte</span>.<span class="kw2">class</span>, <span class="kw2">new</span> RandomGenerator.<span class="kw21">Byte</span><span class="br0">(</span><span class="br0">)</span>, size<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"a2 = "</span> + <span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>a2<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw3">char</span><span class="br0">[</span><span class="br0">]</span> a3 = ConvertTo.<span class="me1">primitive</span><span class="br0">(</span>Generated.<span class="me1">array</span><span class="br0">(</span>
      <span class="kw21">Character</span>.<span class="kw2">class</span>,
      <span class="kw2">new</span> RandomGenerator.<span class="kw21">Character</span><span class="br0">(</span><span class="br0">)</span>, size<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"a3 = "</span> + <span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>a3<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw3">short</span><span class="br0">[</span><span class="br0">]</span> a4 = ConvertTo.<span class="me1">primitive</span><span class="br0">(</span>Generated.<span class="me1">array</span><span class="br0">(</span>
      <span class="kw21">Short</span>.<span class="kw2">class</span>, <span class="kw2">new</span> RandomGenerator.<span class="kw21">Short</span><span class="br0">(</span><span class="br0">)</span>, size<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"a4 = "</span> + <span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>a4<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw3">int</span><span class="br0">[</span><span class="br0">]</span> a5 = ConvertTo.<span class="me1">primitive</span><span class="br0">(</span>Generated.<span class="me1">array</span><span class="br0">(</span>
      <span class="kw21">Integer</span>.<span class="kw2">class</span>, <span class="kw2">new</span> RandomGenerator.<span class="kw21">Integer</span><span class="br0">(</span><span class="br0">)</span>, size<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"a5 = "</span> + <span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>a5<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw3">long</span><span class="br0">[</span><span class="br0">]</span> a6 = ConvertTo.<span class="me1">primitive</span><span class="br0">(</span>Generated.<span class="me1">array</span><span class="br0">(</span>
      <span class="kw21">Long</span>.<span class="kw2">class</span>, <span class="kw2">new</span> RandomGenerator.<span class="kw21">Long</span><span class="br0">(</span><span class="br0">)</span>, size<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"a6 = "</span> + <span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>a6<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw3">float</span><span class="br0">[</span><span class="br0">]</span> a7 = ConvertTo.<span class="me1">primitive</span><span class="br0">(</span>Generated.<span class="me1">array</span><span class="br0">(</span>
      <span class="kw21">Float</span>.<span class="kw2">class</span>, <span class="kw2">new</span> RandomGenerator.<span class="kw21">Float</span><span class="br0">(</span><span class="br0">)</span>, size<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"a7 = "</span> + <span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>a7<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw3">double</span><span class="br0">[</span><span class="br0">]</span> a8 = ConvertTo.<span class="me1">primitive</span><span class="br0">(</span>Generated.<span class="me1">array</span><span class="br0">(</span>
      <span class="kw21">Double</span>.<span class="kw2">class</span>, <span class="kw2">new</span> RandomGenerator.<span class="kw21">Double</span><span class="br0">(</span><span class="br0">)</span>, size<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"a8 = "</span> + <span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>a8<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<p>&lt;spoiler text="Output:"&gt;
</p>
<pre>a1 = [true, false, true, false, false, true]
a2 = [104, -79, -76, 126, 33, -64]
a3 = [Z, n, T, c, Q, r]
a4 = [-13408, 22612, 15401, 15161, -28466, -12603]
a5 = [7704, 7383, 7706, 575, 8410, 6342]
a6 = [7674, 8804, 8950, 7826, 4322, 896]
a7 = [0.01, 0.2, 0.4, 0.79, 0.27, 0.45]
a8 = [0.16, 0.87, 0.7, 0.66, 0.87, 0.59]
</pre>
<p>&lt;/spoiler&gt;
Как видите, все версии <i><b>ConvertTo.primitive()</b></i> работают правильно.
</p>
<h2><span class="mw-headline" id=".D0.92.D1.81.D0.BF.D0.BE.D0.BC.D0.BE.D0.B3.D0.B0.D1.82.D0.B5.D0.BB.D1.8C.D0.BD.D1.8B.D0.B9_.D0.B8.D0.BD.D1.81.D1.82.D1.80.D1.83.D0.BC.D0.B5.D0.BD.D1.82.D0.B0.D1.80.D0.B8.D0.B9_Arrays">Вспомогательный инструментарий Arrays</span></h2>
<p>В библиотеку <i><b>java.util</b></i> включен класс <i><b>Arrays</b></i>, содержащий набор вспомогательных статических методов для работы с массивами. Основных методов шесть: <i><b>equals()</b></i> сравнивает два массива (также существует версия <i><b>deepEquals()</b></i> для многомерных массивов); <i><b>fill()</b></i> был описан ранее в этой главе; <i><b>sort()</b></i> сортирует массив; <i><b>binarySearch(</b></i> ищет элемент в отсортированном массиве; <i><b>toString()</b></i> создает представление массива в формате <i><b>String</b></i>, a <i><b>hashCode()</b></i> генерирует хеш-код массива. Все эти методы перегружены для всех примитивных типов и <i><b>Object</b></i>. Кроме того, метод <i><b>Arrays.asList()</b></i> преобразует любую последовательность или массив в контейнер <i><b>List</b></i> (см. главу 11).
Прежде чем обсуждать методы <i><b>Arrays</b></i>, следует рассмотреть еще один полезный метод, не входящий в <i><b>Arrays</b></i>.
</p><p><br>
</p>
<h3><span class="mw-headline" id=".D0.9A.D0.BE.D0.BF.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.BC.D0.B0.D1.81.D1.81.D0.B8.D0.B2.D0.B0">Копирование массива</span></h3>
<p>Стандартная библиотека <i>Java</i> содержит статический метод <i><b>System.arraycopy()</b></i>, который копирует массивы значительно быстрее, чем при ручном копировании в цикле <i><b>for</b></i>. Метод <i><b>System.arraycopy()</b></i> перегружен для работы со всеми типами. Пример для массивов <i><b>int</b></i>:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"><span class="co1">//: arrays/CopyingArrays.java</span>
<span class="co1">// Using System.arraycopy()</span>
<span class="kw2">import</span> <span class="co2">java.util.*</span><span class="sy0">;</span>
<span class="kw2">import</span> <span class="kw2">static</span> <span class="co2">net.mindview.util.Print.*</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">class</span> CopyingArrays <span class="br0">{</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">void</span> main<span class="br0">(</span><span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw3">int</span><span class="br0">[</span><span class="br0">]</span> i = <span class="kw2">new</span> <span class="kw3">int</span><span class="br0">[</span><span class="nu0">7</span><span class="br0">]</span><span class="sy0">;</span>
    <span class="kw3">int</span><span class="br0">[</span><span class="br0">]</span> j = <span class="kw2">new</span> <span class="kw3">int</span><span class="br0">[</span><span class="nu0">10</span><span class="br0">]</span><span class="sy0">;</span>
    <span class="kw46">Arrays</span>.<span class="me1">fill</span><span class="br0">(</span>i, <span class="nu0">47</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw46">Arrays</span>.<span class="me1">fill</span><span class="br0">(</span>j, <span class="nu0">99</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"i = "</span> + <span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>i<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"j = "</span> + <span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>j<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw21">System</span>.<span class="me1">arraycopy</span><span class="br0">(</span>i, <span class="nu0">0</span>, j, <span class="nu0">0</span>, i.<span class="me1">length</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"j = "</span> + <span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>j<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw3">int</span><span class="br0">[</span><span class="br0">]</span> k = <span class="kw2">new</span> <span class="kw3">int</span><span class="br0">[</span><span class="nu0">5</span><span class="br0">]</span><span class="sy0">;</span>
    <span class="kw46">Arrays</span>.<span class="me1">fill</span><span class="br0">(</span>k, <span class="nu0">103</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw21">System</span>.<span class="me1">arraycopy</span><span class="br0">(</span>i, <span class="nu0">0</span>, k, <span class="nu0">0</span>, k.<span class="me1">length</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"k = "</span> + <span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>k<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw46">Arrays</span>.<span class="me1">fill</span><span class="br0">(</span>k, <span class="nu0">103</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw21">System</span>.<span class="me1">arraycopy</span><span class="br0">(</span>k, <span class="nu0">0</span>, i, <span class="nu0">0</span>, k.<span class="me1">length</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"i = "</span> + <span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>i<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="co1">// Objects:</span>
    <span class="kw21">Integer</span><span class="br0">[</span><span class="br0">]</span> u = <span class="kw2">new</span> <span class="kw21">Integer</span><span class="br0">[</span><span class="nu0">10</span><span class="br0">]</span><span class="sy0">;</span>
    <span class="kw21">Integer</span><span class="br0">[</span><span class="br0">]</span> v = <span class="kw2">new</span> <span class="kw21">Integer</span><span class="br0">[</span><span class="nu0">5</span><span class="br0">]</span><span class="sy0">;</span>
    <span class="kw46">Arrays</span>.<span class="me1">fill</span><span class="br0">(</span>u, <span class="kw2">new</span> <span class="kw21">Integer</span><span class="br0">(</span><span class="nu0">47</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw46">Arrays</span>.<span class="me1">fill</span><span class="br0">(</span>v, <span class="kw2">new</span> <span class="kw21">Integer</span><span class="br0">(</span><span class="nu0">99</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"u = "</span> + <span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>u<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"v = "</span> + <span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>v<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw21">System</span>.<span class="me1">arraycopy</span><span class="br0">(</span>v, <span class="nu0">0</span>, u, u.<span class="me1">length</span>/<span class="nu0">2</span>, v.<span class="me1">length</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"u = "</span> + <span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>u<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<p>&lt;spoiler text="Output:"&gt;
</p>
<pre>i = [47, 47, 47, 47, 47, 47, 47]
j = [99, 99, 99, 99, 99, 99, 99, 99, 99, 99]
j = [47, 47, 47, 47, 47, 47, 47, 99, 99, 99]
k = [47, 47, 47, 47, 47]
i = [103, 103, 103, 103, 103, 47, 47]
u = [47, 47, 47, 47, 47, 47, 47, 47, 47, 47]
v = [99, 99, 99, 99, 99]
u = [47, 47, 47, 47, 47, 99, 99, 99, 99, 99]
</pre>
<p>&lt;/spoiler&gt;
В аргументах <i><b>arraycopy()</b></i> передается исходный массив, 
начальная позиция копирования в исходном массиве, приемный массив, 
начальная позиция копирования в приемном массиве и количество копируемых
 элементов. Естественно, любое нарушение границ массива приведет к 
исключению.
Приведенный пример показывает, что копироваться могут как примитивные, 
так и объектные массивы. Однако при копировании объектных массивов 
копируются только ссылки, но не сами объекты. Такая процедура называется
 поверхностным копированием.<i><b>System.arraycopy()</b></i> не выполняет ни автоматической упаковки, ни автоматической распаковки — типы двух массивов должны полностью совпадать.
</p><p><br>
</p>
<h3><span class="mw-headline" id=".D0.A1.D1.80.D0.B0.D0.B2.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5_.D0.BC.D0.B0.D1.81.D1.81.D0.B8.D0.B2.D0.BE.D0.B2">Сравнение массивов</span></h3>
<p>Класс <i><b>Arrays</b></i> содержит метод <i><b>equals()</b></i> для проверки на равенство целых массивов. Метод перегружен для примитивов и <i><b>Object</b></i>.
 Чтобы два массива считались равными, они должны содержать одинаковое 
количество элементов, и каждый элемент должен быть эквивалентен 
соответствующему элементу другого массива (проверка осуществляется 
вызовом <i><b>equals()</b></i> для каждой пары; для примитивов используется метод <i><b>equals()</b></i> объектной «обертки» — например, <i><b>Integer.equals()</b></i> для <i><b>int</b></i>). Пример:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"><span class="co1">//: arrays/ComparingArrays.java</span>
<span class="co1">// Using Arrays.equals()</span>
<span class="kw2">import</span> <span class="co2">java.util.*</span><span class="sy0">;</span>
<span class="kw2">import</span> <span class="kw2">static</span> <span class="co2">net.mindview.util.Print.*</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">class</span> ComparingArrays <span class="br0">{</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">void</span> main<span class="br0">(</span><span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw3">int</span><span class="br0">[</span><span class="br0">]</span> a1 = <span class="kw2">new</span> <span class="kw3">int</span><span class="br0">[</span><span class="nu0">10</span><span class="br0">]</span><span class="sy0">;</span>
    <span class="kw3">int</span><span class="br0">[</span><span class="br0">]</span> a2 = <span class="kw2">new</span> <span class="kw3">int</span><span class="br0">[</span><span class="nu0">10</span><span class="br0">]</span><span class="sy0">;</span>
    <span class="kw46">Arrays</span>.<span class="me1">fill</span><span class="br0">(</span>a1, <span class="nu0">47</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw46">Arrays</span>.<span class="me1">fill</span><span class="br0">(</span>a2, <span class="nu0">47</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="kw46">Arrays</span>.<span class="me1">equals</span><span class="br0">(</span>a1, a2<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    a2<span class="br0">[</span><span class="nu0">3</span><span class="br0">]</span> = <span class="nu0">11</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="kw46">Arrays</span>.<span class="me1">equals</span><span class="br0">(</span>a1, a2<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span> s1 = <span class="kw2">new</span> <span class="kw21">String</span><span class="br0">[</span><span class="nu0">4</span><span class="br0">]</span><span class="sy0">;</span>
    <span class="kw46">Arrays</span>.<span class="me1">fill</span><span class="br0">(</span>s1, <span class="st0">"Hi"</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span> s2 = <span class="br0">{</span> <span class="kw2">new</span> <span class="kw21">String</span><span class="br0">(</span><span class="st0">"Hi"</span><span class="br0">)</span>, <span class="kw2">new</span> <span class="kw21">String</span><span class="br0">(</span><span class="st0">"Hi"</span><span class="br0">)</span>,
      <span class="kw2">new</span> <span class="kw21">String</span><span class="br0">(</span><span class="st0">"Hi"</span><span class="br0">)</span>, <span class="kw2">new</span> <span class="kw21">String</span><span class="br0">(</span><span class="st0">"Hi"</span><span class="br0">)</span> <span class="br0">}</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="kw46">Arrays</span>.<span class="me1">equals</span><span class="br0">(</span>s1, s2<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<p>&lt;spoiler text="Output:"&gt;
</p>
<pre>true
false
true
</pre>
<p>&lt;/spoiler&gt;
Сначала массивы <i><b>a1</b></i> и <i><b>a2</b></i> полностью совпадают, поэтому результат сравнения равен <i><b>true</b></i>, но после изменения одного из элементов будет получен результат <i><b>false</b></i>. В последнем случае все элементы <i><b>s1</b></i> указывают на один объект, тогда как <i><b>s2</b></i> содержит пять разных объектов. Однако проверка равенства определяется содержимым (с вызовом <i><b>Object.equals()</b></i>), поэтому результат равен <i><b>true</b></i>.
</p><p><br>
</p>
<h3><span class="mw-headline" id=".D0.A1.D1.80.D0.B0.D0.B2.D0.BD.D0.B5.D0.BD.D0.B8.D0.B5_.D1.8D.D0.BB.D0.B5.D0.BC.D0.B5.D0.BD.D1.82.D0.BE.D0.B2_.D0.BC.D0.B0.D1.81.D1.81.D0.B8.D0.B2.D0.BE.D0.B2">Сравнение элементов массивов</span></h3>
<p>Сравнения, выполняемые в ходе сортировки, зависят от фактического 
типа объектов. Конечно, можно написать разные методы сортировки для всех
 возможных типов, но такой код придется модифицировать при появлении 
новых типов.
Главной целью проектирования является «отделение того, что может 
измениться, от того, что остается неизменным». В данном случае 
неизменным остается общий алгоритм сортировки, а изменяется способ 
сравнения объектов. Вместо того, чтобы размещать код сравнения в разных 
функциях сортировки, мы воспользуемся паттерном проектирования 
«стратегия». В этом паттерне переменная часть кода инкапсулируется в 
отдельном классе. Объект стратегии передается коду, который остается 
неизменным, и последний использует стратегию для реализации своего 
алгоритма. При этом разные объекты выражают разные способы сравнения, но
 передаются универсальному коду сортировки.
В <i>Java</i> функциональность сравнения может выражаться двумя 
способами. Первый основан на «естественном» методе сравнения, который 
включается в класс при реализации <i><b>java.lang.Comparable</b></i> — очень простого интерфейса с единственным методом <i><b>compareTo()</b></i>.
 В аргументе метод получает другой объект того же типа. Он выдает 
отрицательное значение, если текущий объект меньше аргумента, нуль при 
равенстве и положительное значение, если текущий объект больше 
аргумента.
</p><p>В следующем примере класс реализует <i><b>Comparable</b></i>, а для демонстрации совместимости используется метод стандартной библиотеки <i>Java</i> <i><b>Arrays.sort()</b></i>:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"><span class="co1">//: arrays/CompType.java</span>
<span class="co1">// Реализация классом интерфейса Comparable.</span>
<span class="kw2">import</span> <span class="co2">java.util.*</span><span class="sy0">;</span>
<span class="kw2">import</span> <span class="co2">net.mindview.util.*</span><span class="sy0">;</span>
<span class="kw2">import</span> <span class="kw2">static</span> <span class="co2">net.mindview.util.Print.*</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">class</span> CompType <span class="kw2">implements</span> <span class="kw21">Comparable</span><span class="sy0">&lt;</span>CompType<span class="sy0">&gt;</span> <span class="br0">{</span>
  <span class="kw3">int</span> i<span class="sy0">;</span>
  <span class="kw3">int</span> j<span class="sy0">;</span>
  <span class="kw2">private</span> <span class="kw2">static</span> <span class="kw3">int</span> count = <span class="nu0">1</span><span class="sy0">;</span>
  <span class="kw2">public</span> CompType<span class="br0">(</span><span class="kw3">int</span> n1, <span class="kw3">int</span> n2<span class="br0">)</span> <span class="br0">{</span>
    i = n1<span class="sy0">;</span>
    j = n2<span class="sy0">;</span>
  <span class="br0">}</span>
  <span class="kw2">public</span> <span class="kw21">String</span> toString<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
    <span class="kw21">String</span> result = <span class="st0">"[i = "</span> + i + <span class="st0">", j = "</span> + j + <span class="st0">"]"</span><span class="sy0">;</span>
    <span class="kw1">if</span><span class="br0">(</span>count++ <span class="sy0">%</span> <span class="nu0">3</span> == <span class="nu0">0</span><span class="br0">)</span>
      result += <span class="st0">"<span class="es0">\n</span>"</span><span class="sy0">;</span>
    <span class="kw2">return</span> result<span class="sy0">;</span>
  <span class="br0">}</span>
  <span class="kw2">public</span> <span class="kw3">int</span> compareTo<span class="br0">(</span>CompType rv<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw2">return</span> <span class="br0">(</span>i <span class="sy0">&lt;</span> rv.<span class="me1">i</span> <span class="sy0">?</span> -<span class="nu0">1</span>&nbsp;: <span class="br0">(</span>i == rv.<span class="me1">i</span> <span class="sy0">?</span> <span class="nu0">0</span>&nbsp;: <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>
  <span class="kw2">private</span> <span class="kw2">static</span> <span class="kw46">Random</span> r = <span class="kw2">new</span> <span class="kw46">Random</span><span class="br0">(</span><span class="nu0">47</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="kw2">public</span> <span class="kw2">static</span> Generator<span class="sy0">&lt;</span>CompType<span class="sy0">&gt;</span> generator<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
    <span class="kw2">return</span> <span class="kw2">new</span> Generator<span class="sy0">&lt;</span>CompType<span class="sy0">&gt;</span><span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
      <span class="kw2">public</span> CompType next<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
        <span class="kw2">return</span> <span class="kw2">new</span> CompType<span class="br0">(</span>r.<span class="me1">nextInt</span><span class="br0">(</span><span class="nu0">100</span><span class="br0">)</span>,r.<span class="me1">nextInt</span><span class="br0">(</span><span class="nu0">100</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
      <span class="br0">}</span>
    <span class="br0">}</span><span class="sy0">;</span>
  <span class="br0">}</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">void</span> main<span class="br0">(</span><span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
    CompType<span class="br0">[</span><span class="br0">]</span> a =
      Generated.<span class="me1">array</span><span class="br0">(</span><span class="kw2">new</span> CompType<span class="br0">[</span><span class="nu0">12</span><span class="br0">]</span>, generator<span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"before sorting:"</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>a<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw46">Arrays</span>.<span class="me1">sort</span><span class="br0">(</span>a<span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"after sorting:"</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>a<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<p>&lt;spoiler text="Output:"&gt;
</p>
<pre>before sorting:
[[i = 58, j = 55], [i = 93, j = 61], [i = 61, j = 29]
, [i = 68, j = 0], [i = 22, j = 7], [i = 88, j = 28]
, [i = 51, j = 89], [i = 9, j = 78], [i = 98, j = 61]
, [i = 20, j = 58], [i = 16, j = 40], [i = 11, j = 22]
]
after sorting:
[[i = 9, j = 78], [i = 11, j = 22], [i = 16, j = 40]
, [i = 20, j = 58], [i = 22, j = 7], [i = 51, j = 89]
, [i = 58, j = 55], [i = 61, j = 29], [i = 68, j = 0]
, [i = 88, j = 28], [i = 93, j = 61], [i = 98, j = 61]
]
</pre>
<p>&lt;/spoiler&gt;
Определяя метод сравнения, вы несете полную ответственность за принятие 
решения о его результатах. В приведенном примере в сравнении 
используются только значения <i><b>і</b></i>, а значения <i><b>j</b></i> игнорируются.
Метод <i><b>generator()</b></i> производит объект, реализующий интерфейс <i><b>Generator</b></i>, создавая анонимный внутренний класс. Объект строит объекты <i><b>CompType</b></i>, инициализируя их случайными значениями. В <i><b>main()</b></i> генератор заполняет массив <i><b>CompType</b></i>, который затем сортируется. Если интерфейс <i><b>Comparable</b></i> не реализован, то при попытке вызова <i><b>sort()</b></i> произойдет исключение <i><b>ClassCastException</b></i>. Это объясняется тем, что <i><b>sort()</b></i> преобразует свой аргумент к типу <i><b>Comparable</b></i>.
Теперь представьте, что вы получили класс, который не реализует интерфейс <i><b>Comparable</b></i>...
 а может быть, реализует, но вам не нравится, как он работает, и вы 
хотели бы задать для типа другой метод сравнения. Для решения проблемы 
создается отдельный класс, реализующий интерфейс <i><b>Comparator</b></i>. Он содержит два метода, <i><b>compare()</b></i> и <i><b>equals()</b></i>. Впрочем, вам практически никогда не придется реализовывать <i><b>equals()</b></i> — разве что при особых требованиях по быстродействию, потому что любой создаваемый класс неявно наследует от класса <i><b>Object</b></i> метод <i><b>equals()</b></i>.
</p><p>Класс <i><b>Collections</b></i> содержит метод <i><b>reverseOrder()</b></i>, который создает <i><b>Comparator</b></i> для порядка сортировки, обратного по отношению к естественному. Он может быть применен к <i><b>CompType</b></i>:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"><span class="co1">//: arrays/Reverse.java</span>
<span class="co1">// The Collections.reverseOrder() Comparator</span>
<span class="kw2">import</span> <span class="co2">java.util.*</span><span class="sy0">;</span>
<span class="kw2">import</span> <span class="co2">net.mindview.util.*</span><span class="sy0">;</span>
<span class="kw2">import</span> <span class="kw2">static</span> <span class="co2">net.mindview.util.Print.*</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">class</span> Reverse <span class="br0">{</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">void</span> main<span class="br0">(</span><span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
    CompType<span class="br0">[</span><span class="br0">]</span> a = Generated.<span class="me1">array</span><span class="br0">(</span>
      <span class="kw2">new</span> CompType<span class="br0">[</span><span class="nu0">12</span><span class="br0">]</span>, CompType.<span class="me1">generator</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"before sorting:"</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>a<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw46">Arrays</span>.<span class="me1">sort</span><span class="br0">(</span>a, <span class="kw46">Collections</span>.<span class="me1">reverseOrder</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"after sorting:"</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>a<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<p>&lt;spoiler text="Output:"&gt;
</p>
<pre>before sorting:
[[i = 58, j = 55], [i = 93, j = 61], [i = 61, j = 29]
, [i = 68, j = 0], [i = 22, j = 7], [i = 88, j = 28]
, [i = 51, j = 89], [i = 9, j = 78], [i = 98, j = 61]
, [i = 20, j = 58], [i = 16, j = 40], [i = 11, j = 22]
]
after sorting:
[[i = 98, j = 61], [i = 93, j = 61], [i = 88, j = 28]
, [i = 68, j = 0], [i = 61, j = 29], [i = 58, j = 55]
, [i = 51, j = 89], [i = 22, j = 7], [i = 20, j = 58]
, [i = 16, j = 40], [i = 11, j = 22], [i = 9, j = 78]
]
</pre>
<p>&lt;/spoiler&gt;
Наконец, вы можете написать собственную реализацию <i><b>Comparator</b></i>. В следующем примере объекты <i><b>CompType</b></i> сравниваются по значениям <i><b>j</b></i> вместо <i><b>і</b></i>:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"><span class="co1">//: arrays/ComparatorTest.java</span>
<span class="co1">// Реализация Comparator.</span>
<span class="kw2">import</span> <span class="co2">java.util.*</span><span class="sy0">;</span>
<span class="kw2">import</span> <span class="co2">net.mindview.util.*</span><span class="sy0">;</span>
<span class="kw2">import</span> <span class="kw2">static</span> <span class="co2">net.mindview.util.Print.*</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">class</span> CompTypeComparator <span class="kw2">implements</span> <span class="kw46">Comparator</span><span class="sy0">&lt;</span>CompType<span class="sy0">&gt;</span> <span class="br0">{</span>
  <span class="kw2">public</span> <span class="kw3">int</span> compare<span class="br0">(</span>CompType o1, CompType o2<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw2">return</span> <span class="br0">(</span>o1.<span class="me1">j</span> <span class="sy0">&lt;</span> o2.<span class="me1">j</span> <span class="sy0">?</span> -<span class="nu0">1</span>&nbsp;: <span class="br0">(</span>o1.<span class="me1">j</span> == o2.<span class="me1">j</span> <span class="sy0">?</span> <span class="nu0">0</span>&nbsp;: <span class="nu0">1</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>
<span class="br0">}</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">class</span> ComparatorTest <span class="br0">{</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">void</span> main<span class="br0">(</span><span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
    CompType<span class="br0">[</span><span class="br0">]</span> a = Generated.<span class="me1">array</span><span class="br0">(</span>
      <span class="kw2">new</span> CompType<span class="br0">[</span><span class="nu0">12</span><span class="br0">]</span>, CompType.<span class="me1">generator</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"before sorting:"</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>a<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw46">Arrays</span>.<span class="me1">sort</span><span class="br0">(</span>a, <span class="kw2">new</span> CompTypeComparator<span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"after sorting:"</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>a<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<p>&lt;spoiler text="Output:"&gt;
</p>
<pre>before sorting:
[[i = 58, j = 55], [i = 93, j = 61], [i = 61, j = 29]
, [i = 68, j = 0], [i = 22, j = 7], [i = 88, j = 28]
, [i = 51, j = 89], [i = 9, j = 78], [i = 98, j = 61]
, [i = 20, j = 58], [i = 16, j = 40], [i = 11, j = 22]
]
after sorting:
[[i = 68, j = 0], [i = 22, j = 7], [i = 11, j = 22]
, [i = 88, j = 28], [i = 61, j = 29], [i = 16, j = 40]
, [i = 58, j = 55], [i = 20, j = 58], [i = 93, j = 61]
, [i = 98, j = 61], [i = 9, j = 78], [i = 51, j = 89]
]
</pre>
<p>&lt;/spoiler&gt;
</p><p><br>
</p>
<h3><span class="mw-headline" id=".D0.A1.D0.BE.D1.80.D1.82.D0.B8.D1.80.D0.BE.D0.B2.D0.BA.D0.B0_.D0.BC.D0.B0.D1.81.D1.81.D0.B8.D0.B2.D0.B0">Сортировка массива</span></h3>
<p>Встроенные средства сортировки позволяют отсортировать любой массив примитивов, любой массив объектов, реализующих <i><b>Comparable</b></i> или ассоциированных с объектом <i><b>Comparator</b></i>. Следующий пример генерирует случайные объекты <i><b>String</b></i> и сортирует их:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"><span class="co1">//: arrays/StringSorting.java</span>
<span class="co1">// Sorting an array of Strings.</span>
<span class="kw2">import</span> <span class="co2">java.util.*</span><span class="sy0">;</span>
<span class="kw2">import</span> <span class="co2">net.mindview.util.*</span><span class="sy0">;</span>
<span class="kw2">import</span> <span class="kw2">static</span> <span class="co2">net.mindview.util.Print.*</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">class</span> StringSorting <span class="br0">{</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">void</span> main<span class="br0">(</span><span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span> sa = Generated.<span class="me1">array</span><span class="br0">(</span><span class="kw2">new</span> <span class="kw21">String</span><span class="br0">[</span><span class="nu0">20</span><span class="br0">]</span>,
      <span class="kw2">new</span> RandomGenerator.<span class="kw21">String</span><span class="br0">(</span><span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"Before sort: "</span> + <span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>sa<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw46">Arrays</span>.<span class="me1">sort</span><span class="br0">(</span>sa<span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"After sort: "</span> + <span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>sa<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw46">Arrays</span>.<span class="me1">sort</span><span class="br0">(</span>sa, <span class="kw46">Collections</span>.<span class="me1">reverseOrder</span><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"Reverse sort: "</span> + <span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>sa<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw46">Arrays</span>.<span class="me1">sort</span><span class="br0">(</span>sa, <span class="kw21">String</span>.<span class="me1">CASE_INSENSITIVE_ORDER</span><span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"Case-insensitive sort: "</span> + <span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>sa<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<p>&lt;spoiler text="Output:"&gt;
</p>
<pre>Before sort: [YNzbr, nyGcF, OWZnT, cQrGs, eGZMm, JMRoE, suEcU, OneOE, dLsmw, HLGEa, 
hKcxr, EqUCB, bkIna,  Mesbt, WHkjU, rUkZP, gwsqP, zDyCy, RFJQA, HxxHv]
After sort: [EqUCB, HLGEa, HxxHv, JMRoE, Mesbt, OWZnT, OneOE, RFJQA, WHkjU, YNzbr, 
bkIna, cQrGs, dLsmw, eGZMm, gwsqP, hKcxr, nyGcF, rUkZP, suEcU, zDyCy]
Reverse sort: [zDyCy, suEcU, rUkZP, nyGcF, hKcxr, gwsqP, eGZMm, dLsmw, cQrGs, bkIna,
YNzbr, WHkjU, RFJQA, OneOE, OWZnT, Mesbt, JMRoE, HxxHv, HLGEa, EqUCB]
Case-insensitive sort: [bkIna, cQrGs, dLsmw, eGZMm, EqUCB, gwsqP, hKcxr, HLGEa, HxxHv,
JMRoE, Mesbt, nyGcF, OneOE, OWZnT, RFJQA, rUkZP, suEcU, WHkjU, YNzbr, zDyCy]
</pre>
<p>&lt;/spoiler&gt;
В выходных данных алгоритма сортировки <i><b>String</b></i> бросается в 
глаза то, что алгоритм является лексикографическим, то есть все слова, 
начинающиеся с прописных букв, предшествуют любым словам, начинающимся 
со строчных букв. Если вы хотите, чтобы слова группировались независимо 
от регистра символов, используйте режим <i><b>String.CASE_INSENSITIVE_ORDER</b></i>, как показано в последнем вызове <i><b>sort()</b></i> из приведенного примера.
Алгоритм сортировки, используемый стандартной библиотекой <i>Java</i>, 
спроектирован в расчете на оптимальность для сортируемого типа — быстрая
 сортировка для примитивов, надежная сортировка слиянием для объектов. 
Обычно вам не приходится беспокоиться о быстродействии, если только 
профайлер не укажет, что процесс сортировки тормозит работу программы.
</p>
<h3><span class="mw-headline" id=".D0.9F.D0.BE.D0.B8.D1.81.D0.BA_.D0.B2_.D0.BE.D1.82.D1.81.D0.BE.D1.80.D1.82.D0.B8.D1.80.D0.BE.D0.B2.D0.B0.D0.BD.D0.BD.D0.BE.D0.BC_.D0.BC.D0.B0.D1.81.D1.81.D0.B8.D0.B2.D0.B5">Поиск в отсортированном массиве</span></h3>
<p>После того, как массив будет отсортирован, вы сможете быстро найти нужный элемент методом <i><b>Arrays.binarySearch()</b></i>. Попытка вызова <i><b>binarySearch()</b></i> для несортированного массива приведет к непредсказуемым последствиям. В следующем примере генератор <i><b>RandomGenerator.Integer</b></i> заполняет массив, после чего тот же генератор используется для получения искомых значений:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"><span class="co1">//: arrays/ArraySearching.java</span>
<span class="co1">// Using Arrays.binarySearch().</span>
<span class="kw2">import</span> <span class="co2">java.util.*</span><span class="sy0">;</span>
<span class="kw2">import</span> <span class="co2">net.mindview.util.*</span><span class="sy0">;</span>
<span class="kw2">import</span> <span class="kw2">static</span> <span class="co2">net.mindview.util.Print.*</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">class</span> ArraySearching <span class="br0">{</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">void</span> main<span class="br0">(</span><span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
    Generator<span class="sy0">&lt;</span><span class="kw21">Integer</span><span class="sy0">&gt;</span> gen =
      <span class="kw2">new</span> RandomGenerator.<span class="kw21">Integer</span><span class="br0">(</span><span class="nu0">1000</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw3">int</span><span class="br0">[</span><span class="br0">]</span> a = ConvertTo.<span class="me1">primitive</span><span class="br0">(</span>
      Generated.<span class="me1">array</span><span class="br0">(</span><span class="kw2">new</span> <span class="kw21">Integer</span><span class="br0">[</span><span class="nu0">25</span><span class="br0">]</span>, gen<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw46">Arrays</span>.<span class="me1">sort</span><span class="br0">(</span>a<span class="br0">)</span><span class="sy0">;</span>
    print<span class="br0">(</span><span class="st0">"Sorted array: "</span> + <span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>a<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw1">while</span><span class="br0">(</span><span class="kw4">true</span><span class="br0">)</span> <span class="br0">{</span>
      <span class="kw3">int</span> r = gen.<span class="me1">next</span><span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
      <span class="kw3">int</span> location = <span class="kw46">Arrays</span>.<span class="me1">binarySearch</span><span class="br0">(</span>a, r<span class="br0">)</span><span class="sy0">;</span>
      <span class="kw1">if</span><span class="br0">(</span>location <span class="sy0">&gt;</span>= <span class="nu0">0</span><span class="br0">)</span> <span class="br0">{</span>
        print<span class="br0">(</span><span class="st0">"Location of "</span> + r + <span class="st0">" is "</span> + location +
          <span class="st0">", a["</span> + location + <span class="st0">"] = "</span> + a<span class="br0">[</span>location<span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span>
        <span class="kw2">break</span><span class="sy0">;</span> <span class="co1">// Out of while loop</span>
      <span class="br0">}</span>
    <span class="br0">}</span>
  <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<p>&lt;spoiler text="Output:"&gt;
</p>
<pre>Sorted array: [128, 140, 200, 207, 258, 258, 278, 288, 322, 429, 511, 520, 522,
551, 555, 589, 693, 704, 809, 861, 861, 868, 916, 961, 998]
Location of 322 is 8, a[8] = 322
</pre>
<p>&lt;/spoiler&gt;
Цикл <i><b>while</b></i> генерирует случайные значения как искомые до тех пор, пока одно из них не будет найдено в массиве.
Если искомое значение найдено, метод <i><b>Arrays.binarySearch()</b></i>
 возвращает неотрицательный результат. В противном случае возвращается 
отрицательное значение, представляющее позицию элемента при вставке (при
 сохранении сортировки массива). Если массив содержит повторяющиеся 
значения, алгоритм поиска не дает гарантий относительно того, какой 
именно из дубликатов будет обнаружен. Алгоритм проектировался не для 
поддержки дубликатов, а для того, чтобы переносить их присутствие. Если 
вам нужен отсортированный список без повторений элементов, используйте <i><b>TreeSet</b></i> (для сохранения порядка сортировки) или <i><b>LinkedHashSet</b></i>
 (для сохранения порядка вставки). Эти классы автоматически берут на 
себя все детали. Только в ситуациях, критичных по быстродействию, эти 
классы заменяются массивами с ручным выполнением операций.
При сортировке объектных массивов с использованием <i><b>Comparator</b></i> (примитивные массивы не позволяют выполнять сортировку с <i><b>Comparator</b></i>) необходимо включать тот же объект <i><b>Comparator</b></i>, что и при использовании <i><b>binarySearch()</b></i> (пе­регруженной версии). Например, программу <i><b>StringSorting.java</b></i> можно модифицировать для выполнения поиска:
</p>
<div dir="ltr" class="mw-geshi mw-code mw-content-ltr"><div class="java5 source-java5"><pre class="de1"><span class="co1">//: arrays/AlphabeticSearch.java</span>
<span class="co1">// // Поиск с Comparator.</span>
<span class="kw2">import</span> <span class="co2">java.util.*</span><span class="sy0">;</span>
<span class="kw2">import</span> <span class="co2">net.mindview.util.*</span><span class="sy0">;</span>
&nbsp;
<span class="kw2">public</span> <span class="kw2">class</span> AlphabeticSearch <span class="br0">{</span>
  <span class="kw2">public</span> <span class="kw2">static</span> <span class="kw3">void</span> main<span class="br0">(</span><span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span> args<span class="br0">)</span> <span class="br0">{</span>
    <span class="kw21">String</span><span class="br0">[</span><span class="br0">]</span> sa = Generated.<span class="me1">array</span><span class="br0">(</span><span class="kw2">new</span> <span class="kw21">String</span><span class="br0">[</span><span class="nu0">30</span><span class="br0">]</span>,
      <span class="kw2">new</span> RandomGenerator.<span class="kw21">String</span><span class="br0">(</span><span class="nu0">5</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw46">Arrays</span>.<span class="me1">sort</span><span class="br0">(</span>sa, <span class="kw21">String</span>.<span class="me1">CASE_INSENSITIVE_ORDER</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw21">System</span>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">(</span><span class="kw46">Arrays</span>.<span class="me1">toString</span><span class="br0">(</span>sa<span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw3">int</span> index = <span class="kw46">Arrays</span>.<span class="me1">binarySearch</span><span class="br0">(</span>sa, sa<span class="br0">[</span><span class="nu0">10</span><span class="br0">]</span>,
      <span class="kw21">String</span>.<span class="me1">CASE_INSENSITIVE_ORDER</span><span class="br0">)</span><span class="sy0">;</span>
    <span class="kw21">System</span>.<span class="me1">out</span>.<span class="me1">println</span><span class="br0">(</span><span class="st0">"Index: "</span>+ index + <span class="st0">"<span class="es0">\n</span>"</span>+ sa<span class="br0">[</span>index<span class="br0">]</span><span class="br0">)</span><span class="sy0">;</span>
  <span class="br0">}</span>
<span class="br0">}</span></pre></div></div>
<p>&lt;spoiler text="Output:"&gt;
</p>
<pre>[bkIna, cQrGs, cXZJo, dLsmw, eGZMm, EqUCB, gwsqP, hKcxr, HLGEa, HqXum, 
HxxHv, JMRoE, JmzMs, Mesbt, MNvqe, nyGcF, ogoYW, OneOE, OWZnT, RFJQA, 
rUkZP, sgqia, slJrL, suEcU, uTpnX, vpfFv, WHkjU, xxEAJ, YNzbr, zDyCy]
Index: 10
HxxHv
</pre>
<p>&lt;/spoiler&gt;
Объект <i><b>Comparator</b></i> передается перегруженному методу <i><b>binarySearch()</b></i> в третьем аргументе. В приведенном примере успех поиска гарантирован, так как искомое значение выбирается из самого массива.
</p>
<h2><span class="mw-headline" id=".D0.A0.D0.B5.D0.B7.D1.8E.D0.BC.D0.B5">Резюме</span></h2>
<p>В этой главе вы убедились в том, что язык <i>Java</i> предоставляет 
неплохую поддержку низкоуровневых массивов фиксированного размера. Такие
 массивы отдают предпочтение производительности перед гибкостью. В 
исходной версии <i>Java</i> низкоуровневые массивы фиксированного размера были абсолютно необходимы — не только потому, что проектировщики <i>Java</i>
 решили включить в язык примитивные типы (также по соображениям 
быстродействия), но и потому, что поддержка контейнеров в этой версии 
была крайне ограниченной.
</p><p>В последующих версиях <i>Java</i> поддержка контейнеров была 
значительно улучшена. Сейчас контейнеры превосходят массивы во всех 
отношениях, кроме быстродействия, хотя производительность контейнеров 
была значительно улучшена. С добавлением автоматической упаковки и 
параметризации хранение примитивов в контейнерах требует меньших усилий и
 способствует дальнейшему переходу с низкоуровневых массивов на 
контейнеры. Так как параметризация открыла доступ к типизованным 
контейнерам, в этом отношении массивы тоже утратили исходные 
преимущества.
</p><p>Как было показано в этой главе, параметризация плохо сочетается с
 контейнерами. Даже если вам удастся тем или иным способом заставить их 
работать вместе, во время компиляции вы будете получать предупреждения.
</p><p>Все эти факторы показывают, что при программировании для последних версий <i>Java</i>
 следует отдавать предпочтение контейнерам перед массивами. На массивы 
следует переходить только при критичных требованиях по быстродействию — и
 только в том случае, если переход принесет ощутимую пользу.

</p>
                <p><br>
                </p>
                <hr>
                <p><a href="http://wikijava.it-cache.net/index.php" title="Thinking in Java 4th edition">назад в Оглавление</a>
                </p><p><br>
                </p>
<!-- 
NewPP limit report
CPU time usage: 4.186 seconds
Real time usage: 4.243 seconds
Preprocessor visited node count: 420/1000000
Preprocessor generated node count: 910/1000000
Post‐expand include size: 243/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key wjava2-wj_:pcache:idhash:29-0!*!*!!ru!*!* and timestamp 20140813070307
 -->
</div>								<div class="printfooter">
				Источник — «<a href="http://wikijava.org.ua/index.php?title=Glava_15_Thinking_in_Java_4th_edition&amp;oldid=39">http://wikijava.org.ua/index.php?title=Глава_15_Thinking_in_Java_4th_edition&amp;oldid=39</a>»				</div>
                                <div id="catlinks" class="catlinks"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="http://wikijava.org.ua/index.php?title=%D0%A1%D0%BB%D1%83%D0%B6%D0%B5%D0%B1%D0%BD%D0%B0%D1%8F:%D0%9A%D0%B0%D1%82%D0%B5%D0%B3%D0%BE%D1%80%D0%B8%D0%B8" title="Служебная:Категории">Категории</a>: <ul><li><a href="http://wikijava.org.ua/index.php?title=%D0%9A%D0%B0%D1%82%D0%B5%D0%B3%D0%BE%D1%80%D0%B8%D1%8F:%D0%9A%D0%BD%D0%B8%D0%B3%D0%B8" title="Категория:Книги">Книги</a></li><li><a href="http://wikijava.org.ua/index.php?title=%D0%9A%D0%B0%D1%82%D0%B5%D0%B3%D0%BE%D1%80%D0%B8%D1%8F:Java" title="Категория:Java">Java</a></li></ul></div></div>												<div class="visualClear"></div>
            </div>
		</div>
		<div id="mw-navigation">
			<h2>Навигация</h2>
			<div id="mw-head">
				<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
	<h3 id="p-personal-label">Персональные инструменты</h3>
	<ul>
<li id="pt-login"><a href="http://wikijava.org.ua/index.php?title=%D0%A1%D0%BB%D1%83%D0%B6%D0%B5%D0%B1%D0%BD%D0%B0%D1%8F:%D0%92%D1%85%D0%BE%D0%B4&amp;returnto=%D0%93%D0%BB%D0%B0%D0%B2%D0%B0+15+Thinking+in+Java+4th+edition" title="Здесь можно зарегистрироваться в системе, но это необязательно. [o]" accesskey="o">Представиться системе</a></li>	</ul>
</div>
				<div id="left-navigation">
					<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
	<h3 id="p-namespaces-label">Пространства имён</h3>
	<ul>
					<!--<li  id="ca-nstab-main" class="selected"><span><a href="index.php@title=Glava_15_Thinking_in_Java_4th_edition.html"  title="Просмотр основной страницы [c]" accesskey="c">Статья</a></span></li>-->
					<!--<li  id="ca-talk" class="new"><span><a href="http://wikijava.org.ua/index.php?title=%D0%9E%D0%B1%D1%81%D1%83%D0%B6%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5:%D0%93%D0%BB%D0%B0%D0%B2%D0%B0_15_Thinking_in_Java_4th_edition&amp;action=edit&amp;redlink=1"  title="Обсуждение основной страницы [t]" accesskey="t">Обсуждение</a></span></li>-->
			</ul>
</div>
<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
	<h3 id="mw-vector-current-variant">
		</h3>
	<h3 id="p-variants-label"><span>Варианты</span><a href="http://wikijava.it-cache.net/index.php@title=Glava_15_Thinking_in_Java_4th_edition.html#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
				</div>
				<div id="right-navigation">
					<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
	<h3 id="p-views-label">Просмотры</h3>
	<ul>
					<!--<li id="ca-view" class="selected"><span><a href="index.php@title=Glava_15_Thinking_in_Java_4th_edition.html" >Читать</a></span></li>-->
					<!--<li id="ca-viewsource"><span><a href="http://wikijava.org.ua/index.php?title=%D0%93%D0%BB%D0%B0%D0%B2%D0%B0_15_Thinking_in_Java_4th_edition&amp;action=edit"  title="Эта страница защищена от изменений, но вы можете посмотреть и скопировать её исходный текст [e]" accesskey="e">Просмотр</a></span></li>-->
					<!--<li id="ca-history" class="collapsible"><span><a href="http://wikijava.org.ua/index.php?title=%D0%93%D0%BB%D0%B0%D0%B2%D0%B0_15_Thinking_in_Java_4th_edition&amp;action=history"  title="Журнал изменений страницы [h]" accesskey="h">История</a></span></li>-->
			</ul>
</div>
<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
	<h3 id="p-cactions-label"><span>Действия</span><a href="http://wikijava.it-cache.net/index.php@title=Glava_15_Thinking_in_Java_4th_edition.html#"></a></h3>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>
<div id="p-search" role="search">
	<h3><label for="searchInput">Поиск</label></h3>
	<form action="http://wikijava.org.ua/index.php" id="searchform">
				<div id="simpleSearch">
						<input name="search" placeholder="Поиск" title="Искать в WikiJava: Wiki of Java: викифицированные книги и статьи по Java [f]" accesskey="f" id="searchInput">						<button type="submit" name="button" title="Найти страницы, содержащие указанный текст" id="searchButton"><img src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%2015_files/search-ltr.asc" alt="Найти" height="13" width="12"></button>								<input name="title" value="Служебная:Поиск" type="hidden">
		</div>
	</form>
</div>
				</div>
			</div>
			<div id="mw-panel">
					<!--<div id="p-logo" role="banner"><a style="background-image: url(/skins/common/images/wikijava.png);" href="index.php@title=Заглавная_страница.html"  title="Перейти на заглавную страницу"></a></div>-->
				<div class="portal" role="navigation" id="p-navigation" aria-labelledby="p-navigation-label">
	<h3 id="p-navigation-label">Навигация</h3>
	<div class="body">
        <ul>
            <li id="n-mainpage-description"><a href="http://wikijava.org.ua/index.php?title=%D0%97%D0%B0%D0%B3%D0%BB%D0%B0%D0%B2%D0%BD%D0%B0%D1%8F_%D1%81%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86%D0%B0" title="Перейти на заглавную страницу [z]" accesskey="z">Заглавная страница</a></li>
            <li id="n-recentchanges"><a href="http://wikijava.org.ua/index.php?title=%D0%A1%D0%BB%D1%83%D0%B6%D0%B5%D0%B1%D0%BD%D0%B0%D1%8F:%D0%A1%D0%B2%D0%B5%D0%B6%D0%B8%D0%B5_%D0%BF%D1%80%D0%B0%D0%B2%D0%BA%D0%B8" title="Список последних изменений [r]" accesskey="r">Свежие правки</a></li>
            <li id="n-.D0.9A.D0.BD.D0.B8.D0.B3.D0.B8-Java"><a href="http://wikijava.org.ua/index.php?title=%D0%9A%D0%BD%D0%B8%D0%B3%D0%B8_Java">Книги Java</a></li>
            <li id="n-.D0.A1.D1.82.D0.B0.D1.82.D1.8C.D0.B8-Java"><a href="http://wikijava.org.ua/index.php?title=%D0%A1%D1%82%D0%B0%D1%82%D1%8C%D0%B8_Java">Статьи Java</a></li>
            <li id="n-Java-.D0.BF.D0.BE.D1.80.D1.82.D0.B0.D0.BB"><a href="http://wikijava.org.ua/index.php?title=Java-portal">Java портал</a></li>
            <li id="n-help"><a href="http://wikijava.org.ua/index.php?title=%D0%A1%D0%BF%D1%80%D0%B0%D0%B2%D0%BA%D0%B0:%D0%A1%D0%BE%D0%B4%D0%B5%D1%80%D0%B6%D0%B0%D0%BD%D0%B8%D0%B5" title="Место, где можно получить справку">Справка</a></li>
            <li id="n-.D0.A1.D1.82.D0.B0.D1.82.D0.B8.D1.81.D1.82.D0.B8.D0.BA.D0.B0"><a href="http://wikijava.org.ua/index.php?title=%D0%A1%D1%82%D0%B0%D1%82%D0%B8%D1%81%D1%82%D0%B8%D0%BA%D0%B0">Статистика</a></li>
        </ul>
	</div>
</div>
<div class="portal" role="navigation" id="p-tb" aria-labelledby="p-tb-label">
	<h3 id="p-tb-label">Инструменты</h3>
	<div class="body">
		<ul>
			<li id="t-whatlinkshere"><a href="http://wikijava.org.ua/index.php?title=%D0%A1%D0%BB%D1%83%D0%B6%D0%B5%D0%B1%D0%BD%D0%B0%D1%8F:%D0%A1%D1%81%D1%8B%D0%BB%D0%BA%D0%B8_%D1%81%D1%8E%D0%B4%D0%B0/%D0%93%D0%BB%D0%B0%D0%B2%D0%B0_15_Thinking_in_Java_4th_edition" title="Список всех страниц, ссылающихся на данную [j]" accesskey="j">Ссылки сюда</a></li>
			<li id="t-recentchangeslinked"><a href="http://wikijava.org.ua/index.php?title=%D0%A1%D0%BB%D1%83%D0%B6%D0%B5%D0%B1%D0%BD%D0%B0%D1%8F:%D0%A1%D0%B2%D1%8F%D0%B7%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5_%D0%BF%D1%80%D0%B0%D0%B2%D0%BA%D0%B8/%D0%93%D0%BB%D0%B0%D0%B2%D0%B0_15_Thinking_in_Java_4th_edition" title="Последние изменения в страницах, на которые ссылается эта страница [k]" accesskey="k">Связанные правки</a></li>
			<li id="t-specialpages"><a href="http://wikijava.org.ua/index.php?title=%D0%A1%D0%BB%D1%83%D0%B6%D0%B5%D0%B1%D0%BD%D0%B0%D1%8F:%D0%A1%D0%BF%D0%B5%D1%86%D1%81%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86%D1%8B" title="Список служебных страниц [q]" accesskey="q">Спецстраницы</a></li>
			<li id="t-print"><a href="http://wikijava.org.ua/index.php?title=%D0%93%D0%BB%D0%B0%D0%B2%D0%B0_15_Thinking_in_Java_4th_edition&amp;printable=yes" rel="alternate" title="Версия этой страницы для печати [p]" accesskey="p">Версия для печати</a></li>
			<li id="t-permalink"><a href="http://wikijava.org.ua/index.php?title=%D0%93%D0%BB%D0%B0%D0%B2%D0%B0_15_Thinking_in_Java_4th_edition&amp;oldid=39" title="Постоянная ссылка на эту версию страницы">Постоянная ссылка</a></li>
			<li id="t-info"><a href="http://wikijava.org.ua/index.php?title=%D0%93%D0%BB%D0%B0%D0%B2%D0%B0_15_Thinking_in_Java_4th_edition&amp;action=info">Сведения о странице</a></li>
		</ul>
	</div>
</div>
<div class="portal" role="navigation" id="p-.D0.94.D1.80.D1.83.D0.B3.D0.B8.D0.B5_.D0.BF.D1.80.D0.BE.D0.B5.D0.BA.D1.82.D1.8B" aria-labelledby="p-.D0.94.D1.80.D1.83.D0.B3.D0.B8.D0.B5_.D0.BF.D1.80.D0.BE.D0.B5.D0.BA.D1.82.D1.8B-label">
	<h3 id="p-.D0.94.D1.80.D1.83.D0.B3.D0.B8.D0.B5_.D0.BF.D1.80.D0.BE.D0.B5.D0.BA.D1.82.D1.8B-label">Другие проекты</h3>
	<div class="body">
		<ul>
			<li id="n-rastafara.com.ua"><a href="http://rastafara.com.ua/" rel="nofollow">rastafara.com.ua</a></li>
			<li id="n-rastafara-blog"><a href="http://sergey-rastafara.blogspot.com/" rel="nofollow">rastafara blog</a></li>
			<li id="n-rastaban"><a href="http://rastaban.com.ua/" rel="nofollow">rastaban</a></li>
		</ul>
	</div>
</div>
			</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> Последнее изменение этой страницы: 21:59, 16 февраля 2014.</li>
											<li id="footer-info-viewcount">К этой странице обращались 1417 раза.</li>
											<li id="footer-info-copyright">Содержимое доступно по лицензии <a class="external" rel="nofollow" href="http://www.gnu.org/copyleft/fdl.html">GNU Free Documentation License 1.3 или более поздняя</a> (если не указано иное).</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-privacy"><a href="http://wikijava.org.ua/index.php?title=WikiJava:_Wiki_of_Java:_%D0%B2%D0%B8%D0%BA%D0%B8%D1%84%D0%B8%D1%86%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5_%D0%BA%D0%BD%D0%B8%D0%B3%D0%B8_%D0%B8_%D1%81%D1%82%D0%B0%D1%82%D1%8C%D0%B8_%D0%BF%D0%BE_Java:%D0%9F%D0%BE%D0%BB%D0%B8%D1%82%D0%B8%D0%BA%D0%B0_%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B4%D0%B5%D0%BD%D1%86%D0%B8%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D1%81%D1%82%D0%B8" title="WikiJava: Wiki of Java: викифицированные книги и статьи по Java:Политика конфиденциальности">Политика конфиденциальности</a></li>
											<li id="footer-places-about"><a href="http://wikijava.org.ua/index.php?title=WikiJava:_Wiki_of_Java:_%D0%B2%D0%B8%D0%BA%D0%B8%D1%84%D0%B8%D1%86%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5_%D0%BA%D0%BD%D0%B8%D0%B3%D0%B8_%D0%B8_%D1%81%D1%82%D0%B0%D1%82%D1%8C%D0%B8_%D0%BF%D0%BE_Java:%D0%9E%D0%BF%D0%B8%D1%81%D0%B0%D0%BD%D0%B8%D0%B5" title="WikiJava: Wiki of Java: викифицированные книги и статьи по Java:Описание">Описание WikiJava: Wiki of Java: викифицированные книги и статьи по Java</a></li>
											<li id="footer-places-disclaimer"><a href="http://wikijava.org.ua/index.php?title=WikiJava:_Wiki_of_Java:_%D0%B2%D0%B8%D0%BA%D0%B8%D1%84%D0%B8%D1%86%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5_%D0%BA%D0%BD%D0%B8%D0%B3%D0%B8_%D0%B8_%D1%81%D1%82%D0%B0%D1%82%D1%8C%D0%B8_%D0%BF%D0%BE_Java:%D0%9E%D1%82%D0%BA%D0%B0%D0%B7_%D0%BE%D1%82_%D0%BE%D1%82%D0%B2%D0%B5%D1%82%D1%81%D1%82%D0%B2%D0%B5%D0%BD%D0%BD%D0%BE%D1%81%D1%82%D0%B8" title="WikiJava: Wiki of Java: викифицированные книги и статьи по Java:Отказ от ответственности">Отказ от ответственности</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
					<li id="footer-copyrightico">
						<a href="http://www.gnu.org/copyleft/fdl.html"><img src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%2015_files/gnu-fdl.png" alt="GNU Free Documentation License 1.3 или более поздняя" height="31" width="88"></a>
					</li>
					<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="%D0%93%D0%BB%D0%B0%D0%B2%D0%B0%2015_files/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" height="31" width="88"></a>
					</li>
				</ul>
						<div style="clear:both"></div>
		</div>
		<script>/*<![CDATA[*/window.jQuery && jQuery.ready();/*]]>*/</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.vector.collapsibleNav","ext.vector.collapsibleTabs","ext.vector.editWarning","ext.vector.simpleSearch","skins.vector.collapsibleNav"],null,true);
}</script>
<script>if(window.mw){
mw.loader.state({"site":"ready"});
}</script>
<!-- Served in 0.232 secs. -->
	

</body></html>